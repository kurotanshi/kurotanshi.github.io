<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[åˆ©ç”¨ Yarn å®‰è£ Vue-cli]]></title>
      <url>http://kuro.tw/posts/2016/10/13/%E5%88%A9%E7%94%A8-yarn-%E5%AE%89%E8%A3%9D-vue-cli/</url>
      <content type="html"><![CDATA[<p>é€™å…©å¤© JavaScript åœˆå­çš„æœ€å¤§æ–°èæ‡‰è©²å°±æ˜¯ Facebook ç™¼å¸ƒäº†ä¸€å¥—æ–°çš„ JavaScript å¥—ä»¶ç®¡ç†å·¥å…· Yarnï¼Œæ„Ÿè¦ºä¾†å‹¢æ´¶æ´¶å‹¢ä¸å¯æ“‹ã€‚
å¯¦éš›èŠ±äº†ä¸€é»æ™‚é–“è©¦ç”¨ï¼Œè¡¨ç¾çš„ç¢ºä¹Ÿæ¯”éå» npm å¥½å¾ˆå¤šï¼Œå°¤å…¶éå» <code>npm install</code> é€Ÿåº¦éæ…¢ï¼Œå¥—ä»¶ç›¸ä¾è¡çªçš„å•é¡Œï¼Œç›®å‰åœ¨ Yarn é‚„æ²’é‡åˆ°ã€‚ å³ä½¿æ˜¯å‰›é–‹å§‹ <code>yarn run scripts</code> ç„¡æ³•å¸¶å…¥åƒæ•¸çš„å•é¡Œï¼Œåœ¨ç™¼å¸ƒçš„ç¬¬äºŒå¤©ä¹Ÿå¿«é€Ÿåœ°æ›´æ–° (v0.15.1) è§£æ±ºäº†ã€‚ ğŸ‘</p>
<p><img src="/static/img/yarn-logo.png"></p>
<p>æœ‰é—œ Yarn ä»‹ç´¹çš„éƒ¨åˆ†ï¼Œå·²ç¶“æœ‰å…¶ä»–å‰è¼©åˆ†äº«äº†ï¼Œæ¨è–¦å¯ä»¥çœ‹çœ‹é€™ç¯‡ <a href="https://medium.com/@jackypan1989/%E5%8F%96%E4%BB%A3-npm-%E7%9A%84%E6%96%B0%E5%88%A9%E5%99%A8-yarn-7d97f2f409b9#.pu0jrdcc4" target="_blank" rel="external">å–ä»£ npm çš„æ–°åˆ©å™¨ Yarn</a>ã€‚</p>
<p>æ—¢ç„¶ Yarn è™Ÿç¨±å¯ä»¥ç”¨ä¾†å–ä»£ npmï¼Œé‚£éº¼èº«ç‚º Vue çš„æ„›å¥½è€…ï¼Œä¹Ÿæƒ³é¦¬ä¸Šä¾†è©¦è©¦ <a href="https://github.com/vuejs/vue-cli" target="_blank" rel="external">Vue-cli</a> é€™å¥— Vue çš„æ¨£æ¿å·¥å…·åŒ…æ˜¯å¦ä¹Ÿå¯ä»¥é€é yarn ä¾†å–®ç¨åŸ·è¡Œã€‚</p>
<p><del>æ—¢ç„¶è¦å–ä»£ npmï¼Œé‚£éº¼ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯æŠŠ npm æ•´åŒ…å¹¹æ‰</del>ï¼Œé—œæ–¼åˆªæ‰ npm modules çš„éç¨‹æˆ‘æ˜¯åƒè€ƒ stackoverflow çš„é€™ç¯‡:
<a href="http://stackoverflow.com/questions/9283472/command-to-remove-all-npm-modules-globally" target="_blank" rel="external">Command to remove all npm modules globally?</a>ï¼Œä½†å¯¦éš›ä¸Š Yarn èˆ‡ npm æ˜¯å¯ä»¥å’Œå¹³å…±å­˜çš„ï¼Œä¸ä¸€å®šè¦æŠŠ npm å¹¹æ‰æ‰èƒ½è·‘ Yarn ï¼Œé€™è£¡åªæ˜¯æƒ³ç°¡å–®åšå€‹è©¦é©—ï¼Œå•¾å’ª ^.&lt;</p>
<p>ç„¶å¾Œå®‰è£ Yarnã€‚ åŸ·è¡Œ <code>curl -o- -L https://yarnpkg.com/install.sh | bash</code> å³å¯ã€‚</p>
<hr>

<h3 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£-vue-cli"><a href="#ç¬¬ä¸€æ­¥ï¼šå®‰è£-vue-cli" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®‰è£ vue-cli"></a>ç¬¬ä¸€æ­¥ï¼šå®‰è£ vue-cli</h3><p>å¾ˆç°¡å–®ï¼ŒæŠŠåŸæœ¬çš„  <code>npm install -g vue-cli</code> æ”¹æˆ <code>yarn add global vue-cli</code> å°±å¯ä»¥äº†ã€‚åŸ·è¡Œçš„æ™‚å€™åƒé€™æ¨£ï¼š
<img src="/static/img/yarn-vue-1.png"></p>
<p>è€Œå®‰è£å®Œç•¢å¾Œï¼ŒåŸ·è¡Œ <code>yarn vue</code> æ‡‰è©²å¯ä»¥çœ‹åˆ°é€™æ¨£çš„ç•«é¢ã€‚
<img src="/static/img/yarn-vue-2.png"></p>
<p>æ¯åŸ·è¡Œå®Œä¸€å€‹æŒ‡ä»¤é‚„æœƒå‘Šè¨´ä½ å®ƒè·‘äº†å¤šä¹…å–”<del>ï¼Œéå¸¸å›‚å¼µ (èª¤)</del>ã€‚</p>
<h3 id="ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–-Vue-å°ˆæ¡ˆ"><a href="#ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–-Vue-å°ˆæ¡ˆ" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– Vue å°ˆæ¡ˆ"></a>ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ– Vue å°ˆæ¡ˆ</h3><p>æ¥è‘—ï¼Œå°±ä¾†åˆå§‹åŒ–æˆ‘å€‘çš„ Vue å°ˆæ¡ˆã€‚ Vue-cli é€™å€‹ scaffolding å·¥å…·å®˜æ–¹ç›®å‰æä¾›äº†å¹¾ç¨® template è®“é–‹ç™¼è€…è‡ªè¡Œé¸æ“‡ï¼Œ
åƒæ˜¯å¤§å®¶å¸¸è¦‹çš„ webpackã€browserify éƒ½æœ‰ã€‚ç•¶ç„¶ä¹Ÿå¯ä»¥æŒ‘é¸ä»€éº¼éƒ½æ²’æœ‰çš„ simple: å°±æ˜¯æœ€åŸºæœ¬çš„ Vue å°ˆæ¡ˆé€™æ¨£ã€‚
å¦‚æœæƒ³æ›´è©³ç´°äº†è§£å„ç¨® template ç´°ç¯€çš„è©±ï¼Œå¯ä»¥åˆ° vue-templates çš„ <a href="https://github.com/vuejs-templates" target="_blank" rel="external">Repo</a> å»çœ‹ã€‚</p>
<p>é€™è£¡æˆ‘å°±é¸æ“‡æ‹¿ã€Œ<a href="https://github.com/vuejs-templates/webpack-simple" target="_blank" rel="external">webpack-simple</a>ã€ç•¶ç¯„ä¾‹ã€‚</p>
<p>åŸ·è¡Œ <code>yarn vue init webpack-simple my-project</code>
<img src="/static/img/yarn-vue-3.png"></p>
<p>å› ç‚º VueJS ç›®å‰å·²ç¶“ç™¼ä½ˆè‡³ 2.0 ç‰ˆäº†ï¼Œæ‰€ä»¥ä½ æœƒçœ‹åˆ° Vue-cli å¾ˆè²¼å¿ƒåœ°æé†’ä½ ç¾åœ¨å®‰è£çš„æ˜¯<span style="color: red;"> 2.0 çš„ç‰ˆæœ¬</span>ã€‚
è‹¥ä½ æƒ³å®‰è£çš„æ˜¯ 1.x ç‰ˆæœ¬çš„è©±ï¼Œå¯ä»¥æ”¹æˆ <br> <code>yarn vue init webpack-simple#1.0 my-project</code> å³å¯ã€‚</p>
<p>ç„¶å¾Œï¼ŒVue-cli æœƒå¹«æˆ‘å€‘å»ºç«‹ä¸€å€‹æ–°ç›®éŒ„ <code>my-project</code>ã€‚</p>
<p>é€é <code>cd my-project</code> åˆ‡æ›åˆ°æ–°å°ˆæ¡ˆç›®éŒ„å¾Œï¼Œæˆ‘å€‘å°‡åŸæœ¬çš„ <code>npm install</code> æ”¹æˆç›´æ¥åŸ·è¡Œ <code>yarn</code> å³å¯ã€‚
<img src="/static/img/yarn-vue-4.png"></p>
<h3 id="ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ-vue-å°ˆæ¡ˆ"><a href="#ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ-vue-å°ˆæ¡ˆ" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ vue å°ˆæ¡ˆ"></a>ç¬¬ä¸‰æ­¥ï¼šå•Ÿå‹•ä¸¦åŸ·è¡Œ vue å°ˆæ¡ˆ</h3><p>æœ€å¾Œï¼Œç›´æ¥åŸ·è¡Œ <code>yarn run dev</code> æ‡‰è©²æœƒçœ‹åˆ°åƒé€™æ¨£çš„ç•«é¢ã€‚
<img src="/static/img/yarn-vue-5.png"></p>
<p>æ‰“é–‹ä½ çš„ç€è¦½å™¨é€£åˆ° <code>http://localhost:8080/</code> çœ‹åˆ° <code>Hello Vue!</code> çš„å­—æ¨£å°±ä»£è¡¨æˆåŠŸåŸ·è¡Œå›‰ï¼
<img src="/static/img/yarn-vue-6.png"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[ç­†è¨˜] é€é Composition Events å¢å¼·éæ‹‰ä¸èªç³»è¼¸å…¥æ³•å°è¼¸å…¥æ¡†çš„æ”¯æ´]]></title>
      <url>http://kuro.tw/posts/2016/10/11/%E7%AD%86%E8%A8%98-%E9%80%8F%E9%81%8E-Composition-Events-%E5%A2%9E%E5%BC%B7%E9%9D%9E%E6%8B%89%E4%B8%81%E8%AA%9E%E7%B3%BB%E8%BC%B8%E5%85%A5%E6%B3%95%E5%B0%8D%E8%BC%B8%E5%85%A5%E6%A1%86%E7%9A%84%E6%94%AF%E6%8F%B4/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨çˆ¬ Vue çš„åŸå§‹ç¢¼çš„æ™‚å€™ï¼Œæ„å¤–ç™¼ç¾å…©å€‹æ²’çœ‹éçš„ eventï¼š<code>compositionstart</code> èˆ‡ <code>compositionend</code>ã€‚ æŸ¥äº†ä¸€ä¸‹ MDN æ‰ç™¼ç¾é€™äº›å«åšã€Œ<a href="https://developer.mozilla.org/en-US/docs/Web/API/CompositionEvent" title="Composition Events" target="_blank" rel="external">Composition Events</a>ã€çš„ event æ˜¯å¾ DOM Level 3 ä¹‹å¾Œæ‰æ–°å¢çš„ã€‚</p>
<p>ä»‹ç´¹ Composition Events ä¹‹å‰å…ˆä¾†è«‡è«‡ DOM API éå»å°è¼¸å…¥æ¡†åµæ¸¬è®ŠåŒ–çš„å¹¾å€‹æ–¹å¼ã€‚</p>
<p>ä¸€èˆ¬ä¾†èªªï¼Œå¸¸è¦‹çš„è¡¨å–®è¼¸å…¥æ¡†å¦‚: <code>&lt;input type=&quot;text&quot;&gt;</code> å¦‚æœè¦å‹•æ…‹ç›£è½è¼¸å…¥æ¡†çš„æ–‡å­—è®ŠåŒ–æ™‚ï¼Œ
å¤§å¤šæœƒé€éç›£è½ <code>keydown</code>ã€<code>keypress</code>ã€<code>keyup</code> ç­‰éµç›¤äº‹ä»¶ä¾†åˆ¤æ–· value æ˜¯å¦è®Šå‹•ï¼Œä½†å¦‚æœæ˜¯é€éè¤‡è£½è²¼ä¸Šä¹‹é¡çš„æ“ä½œï¼Œå°±ç„¡æ³•é€ééµç›¤äº‹ä»¶ä¾†åˆ¤æ–·ã€‚</p>
<p>è€Œå³ä½¿æ˜¯ <code>change</code> äº‹ä»¶å‰‡æ˜¯è¦åœ¨ä½¿ç”¨è€…æ”¹è®Šå…§å®¹ï¼Œä¸”<span style="color: red;">ç„¦é»é›¢é–‹è¼¸å…¥æ¡†çš„å‰ä¸€åˆ»æ‰æœƒè¢«è§¸ç™¼</span>ã€‚
æ‰€ä»¥å¾Œä¾†æœ‰äº† <code>input</code> äº‹ä»¶ï¼Œ input äº‹ä»¶æœƒåœ¨<span style="color: red;">è¼¸å…¥æ¡†çš„å…§å®¹è¢«æ”¹è®Šæ™‚å³æ™‚è§¸ç™¼</span>ï¼Œç¢ºå¯¦ä¹Ÿè§£æ±ºäº†éå»åœ¨ onChange ä»¥åŠéµç›¤ç›¸é—œäº‹ä»¶å¸¶ä¾†çš„ä¸å°‘å•é¡Œã€‚</p>
<p>æ–°çš„å•é¡Œä¾†äº†ï¼</p>
<p>é€šå¸¸åƒé€™æ¨£çš„æœå°‹æ¡†ï¼Œæˆ‘å€‘æœƒç”¨é¡ä¼¼ autocomplete çš„æ–¹å¼çµ¦ä½¿ç”¨è€…æœå°‹å»ºè­° (ä»¥ google ç‚ºä¾‹)ï¼š
<img src="/static/img/google-autocompleted.png"></p>
<p>å¦‚ä¸Šåœ–ï¼Œåœ¨è¼¸å…¥ä¸­æ–‡çš„æ™‚å€™ï¼Œé€šå¸¸æœƒéœ€è¦é€éæ³¨éŸ³ä¹‹é¡çš„è¼¸å…¥æ³•ä¾†åšæ‹¼å­—ï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†çš„æƒ…æ³ä¸‹ï¼Œè‡ªå‹•çµ¦ã€Œæ³¨éŸ³ç¬¦è™Ÿã€æˆ–æ˜¯ã€Œæ‹¼éŸ³æ–‡å­—ã€æœå°‹å»ºè­°æ˜¯æ²’æœ‰å¤ªå¤§æ„ç¾©çš„ã€‚</p>
<p>å›åˆ°ä¸»é¡Œã€‚é€™å€‹æ™‚å€™å°±éœ€è¦é€é <strong>Composition Events</strong> ä¾†ç‚ºè¼¸å…¥æ¡†åšå¢å¼·ã€‚
é€é Composition Events æˆ‘å€‘å¯ä»¥è§€å¯Ÿä½¿ç”¨è€…åœ¨è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³• (Input Method Editor, IME) æ™‚ï¼Œçµ„å­—æˆ–é¸å­—çš„ç‹€æ…‹ã€‚</p>
<p>Composition Events æä¾›ä¸‰å€‹äº‹ä»¶çµ¦é–‹ç™¼è€…ç›£è½ï¼šåˆ†åˆ¥æ˜¯ <code>compositionstart</code> ã€ <code>compositionend</code> ï¼Œä»¥åŠ <code>compositionupdate</code>ã€‚</p>
<ul>
<li><code>compositionstart</code>: è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³•ï¼Œä¸”æ­£åœ¨æ‹¼å­—æ™‚è§¸ç™¼ã€‚</li>
<li><code>compositionupdate</code>:è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³•ï¼Œä¸”æ­£åœ¨æ‹¼å­—æˆ–é¸å­—æ™‚æ›´æ”¹äº†å…§å®¹æ™‚è§¸ç™¼ã€‚</li>
<li><code>compositionend</code>: è¼¸å…¥æ¡†å…§é–‹å•Ÿè¼¸å…¥æ³•ï¼Œæ‹¼å­—æˆ–é¸å­—å®Œæˆï¼Œæ­£è¦é€å‡ºè‡³è¼¸å…¥æ¡†æ™‚è§¸ç™¼ã€‚</li>
</ul>
<p></p><p></p>
åŸ·è¡Œçš„æ™‚å€™åƒé€™æ¨£ï¼š
<img src="/static/img/composition-demo.png"><p></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœè¦ç¢ºèªä½¿ç”¨è€…è¼¸å…¥å®Œæˆä¸¦é€å‡ºæ–‡å­—æ™‚ï¼Œå¯ä»¥é€é <code>compositionend</code> ä¾†åšæœ€å¾Œç¢ºèªã€‚<br>
é™„ä¸Š JSBin Demo: <a href="http://jsbin.com/mofepimiqo/1/edit?js,console,output" target="_blank" rel="external">http://jsbin.com/mofepimiqo/1/edit?js,console,output</a></p>
<p>æœ€å¾Œå‰‡æ˜¯å¤§å®¶éƒ½å¾ˆé—œå¿ƒçš„ç€è¦½å™¨æ”¯æ´åº¦ã€‚ä»¥ç›®å‰ä¾†èªªï¼Œmobile å¹³å°ä¸Šå¯èƒ½é‚„ä¸å¤ª okï¼Œä½†æ˜¯ Desktop å¹³å°ä¸Šè¡¨ç¾çœ‹èµ·ä¾†ç›¸ç•¶ä¸éŒ¯ï¼Œå¯ä»¥å¤§è†½åœ°ä½¿ç”¨å›‰ã€‚
<img src="/static/img/compositionEvent-compatibility.png"></p>
<p></p><p class="no-space" style="margin-bottom:0">åƒè€ƒè³‡æ–™ï¼š</p><p></p>
<ul>
<li><a href="http://blog.zhusee.in/post/146553/enhance-ime-support-of-codemirror-with-composition-events" target="_blank" rel="external">ç”¨ Composition Event æ”¹é€² CodeMirror å°è¼¸å…¥æ³•çš„æ”¯æ´</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CompositionEvent" title="Composition Events" target="_blank" rel="external">MDN: Composition Events</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[VueJS å„ç¨®è³‡æ–™ç¶å®š (data binding) çš„æ–¹å¼]]></title>
      <url>http://kuro.tw/posts/2016/10/05/VueJS-%E5%90%84%E7%A8%AE%E8%B3%87%E6%96%99%E7%B6%81%E5%AE%9A-data-binding-%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>å¤§éƒ¨åˆ†è³‡æ–™æ˜¯å¾é€™è£¡ä¾†çš„: <a href="https://github.com/vuejs/vue/wiki/1.0.0-binding-syntax-cheatsheet" target="_blank" rel="external">Vue 1.0.0 binding syntax cheatsheet</a>ï¼Œå†åŠ ä¸Šå° Vue 2.0 è£œå……çš„éƒ¨åˆ†ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- normal directive --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"ok"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- directive with argument --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"onClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- v-on with argument + key modifier --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">"handleEnter"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- literal modifier: pass literal string to directive for Vue 1.x, --&gt;</span></div><div class="line"><span class="comment">&lt;!-- but deprecated in 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-link.literal</span>=<span class="string">"/a/b/c"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- binding an attribute with v-bind --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">"imgSrc"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">"baseURL + '/path'"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- shorthand: colon for v-bind --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"imgSrc"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">"baseURL + '/path'"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- shorthand: @ for v-on --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"onClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- key modifier --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">"handleEnter"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- stop/prevent modifier --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">"onClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- props for Vue 1.x --&gt;</span></div><div class="line"><span class="comment">&lt;!-- .once and .sync are deprecated in 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">my-comp</span></span></div><div class="line">  <span class="attr">prop</span>=<span class="string">"literal string"</span></div><div class="line">  <span class="attr">v-bind:prop</span>=<span class="string">"defaultOneWay"</span></div><div class="line">  <span class="attr">v-bind:prop.sync</span>=<span class="string">"twoWay"</span></div><div class="line">  <span class="attr">v-bind:prop.once</span>=<span class="string">"oneTime"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">my-comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- props with one time binding for Vue 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">my-comp</span></span></div><div class="line">  <span class="attr">prop</span>=<span class="string">"literal string"</span></div><div class="line">  <span class="attr">v-bind:prop</span>=<span class="string">"defaultOneWay"</span></div><div class="line">  <span class="attr">v-once</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">my-comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- component with props and custom events, in shorthand --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">item-list</span></span></div><div class="line">  <span class="attr">:items</span>=<span class="string">"items"</span></div><div class="line">  <span class="attr">:open.sync</span>=<span class="string">"isListOpen"</span></div><div class="line">  @<span class="attr">ready</span>=<span class="string">"onItemsReady"</span></div><div class="line">  @<span class="attr">update</span>=<span class="string">"onItemsUpdate"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">item-list</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- v-el and v-ref now just use the argument --&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- registers vm.$refs.child for Vue 1.x --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">comp</span> <span class="attr">v-ref:child</span>&gt;</span><span class="tag">&lt;/<span class="name">comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- registers vm.$refs.child for Vue 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">comp</span> <span class="attr">ref:child</span>&gt;</span><span class="tag">&lt;/<span class="name">comp</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- registers vm.$els.node for Vue 1.x, but deprecated in 2.0 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-el:node</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[VueJS] V1 èˆ‡ V2 å…ƒä»¶å¯¦é«”ä¹‹å·®ç•°]]></title>
      <url>http://kuro.tw/posts/2016/10/03/VueJS-V1-%E8%88%87-V2-%E5%85%83%E4%BB%B6%E5%AF%A6%E9%AB%94%E4%B9%8B%E5%B7%AE%E7%95%B0/</url>
      <content type="html"><![CDATA[<p>ç‹‚è³€ï¼ <a href="https://github.com/vuejs/vue/releases/tag/v2.0.0" title="Vue 2.0" target="_blank" rel="external">Vue 2.0</a> çµ‚æ–¼æ­£å¼ç™¼ä½ˆï¼</p>
<p>é—œæ–¼ Vue 2.0 çš„æ–°ç‰¹æ€§ï¼Œä½œè€…ä¹Ÿåœ¨å®˜æ–¹ Blog - <a href="https://medium.com/the-vue-point/vue-2-0-is-here-ef1f26acf4b8#.n0m3yjfmp" title="Vue 2.0 is Here!" target="_blank" rel="external">Vue 2.0 is Here!</a> (<a href="http://jiongks.name/blog/vue-2-is-here/" title="Vue 2.0 æ¥äº†ï¼" target="_blank" rel="external">ä¸­æ–‡ç¿»è­¯</a>) ä¸€æ–‡ä¸­æ•˜è¿°åœ°ç›¸ç•¶è©³ç´°ï¼Œé€™è£¡å°±ä¸å¤šèªªã€‚</p>
<p>å¦‚æœä½ ä¹Ÿèˆ‡æˆ‘ä¸€æ¨£æ˜¯å¾ V1 å°±é–‹å§‹æ¥è§¸çš„é–‹ç™¼è€…ï¼Œä¸€å®šéƒ½çŸ¥é“ VueJS æœ€æ ¸å¿ƒçš„ä¸€éƒ¨åˆ†æ˜¯ Componentï¼Œè€Œ Component æ˜¯ç”±å¯¦é«” (Vue Instance) ä¾†å¯¦ä½œã€‚
åœ¨é€™ç¯‡æ–‡ç« ï¼Œæˆ‘å€‘å°±ä¾†è«‡è«‡ Vue 1.x èˆ‡ 2.x å…ƒä»¶å¯¦é«”çš„å·®ç•°ã€‚</p>
<hr>

<h3 id="Vue-2-0-å…ƒä»¶å¯¦é«”è¨»å†Š"><a href="#Vue-2-0-å…ƒä»¶å¯¦é«”è¨»å†Š" class="headerlink" title="Vue 2.0 å…ƒä»¶å¯¦é«”è¨»å†Š"></a>Vue 2.0 å…ƒä»¶å¯¦é«”è¨»å†Š</h3><p><img alt="tree of components" src="/static/img/Vue-instance.png"></p>
<p>åƒä¸Šé¢é€™æ¨£çš„ç¶²ç«™ï¼Œæˆ‘å€‘å¯ä»¥å°‡å®ƒæŠ½è±¡åŒ–ç‚ºä¸€æ£µã€Œå…ƒä»¶æ¨¹ã€ï¼Œè€Œæ¯å€‹å…ƒä»¶æ¨¹éƒ½æœƒæœ‰å€‹æ ¹ç¯€é»ï¼Œæˆ–ç¨±ç‚ºæ ¹å¯¦é«” (root Vue instance)ã€‚</p>
<p>é‚£éº¼ï¼Œæ¯å€‹ Vue å…ƒä»¶æ¨¹çš„æ ¹å¯¦é«”å…¶å¯¦æ˜¯é€é <code>Vue</code> é€™å€‹å»ºæ§‹å‡½å¼æ‰€ç”¢ç”Ÿï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="comment">// options</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>å°‡ Vue å…ƒä»¶èˆ‡å¯¦é«” DOM çµåˆçš„æ–¹å¼æœ‰å…©ç¨®ï¼Œä¸€ç¨®æ˜¯ç›´æ¥å¯«åœ¨ <code>el</code> option å…§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è€Œå¦ä¸€ç¨®æ–¹å¼å‰‡æ˜¯é€é <code>$mount</code> ä¾†æŒ‡å®šç¯€é»ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="comment">// options without 'el'</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">vm.$mount(<span class="string">'#app'</span>);</div></pre></td></tr></table></figure></p>
<p>é€™éƒ¨åˆ†è·Ÿ Vue 1.x çš„è¨»å†Šæ˜¯å®Œå…¨ä¸€æ¨£çš„ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ vue 1.x å…è¨±é–‹ç™¼è€…ä»¥ <code>&lt;body&gt;</code> æˆ– <code>&lt;html&gt;</code> ä½œç‚ºæ ¹å¯¦é«”çš„æ›è¼‰é»ï¼Œ
ä½†<span style="color: #f00">åˆ°äº† VueJS 2.0 å¾Œï¼Œåªèƒ½é€é <strong>ç¨ç«‹çš„ç¯€é»æ›è¼‰</strong> </span>ï¼Œå¦‚: div ç­‰ã€‚ å¦å‰‡æœƒç”¢ç”ŸéŒ¯èª¤ï¼Œè­¦å‘Šè¨Šæ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">â€œDo not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.â€œ</div></pre></td></tr></table></figure>
<p>æ›æˆç”¨ç¨ç«‹çš„ DOM ç¯€é»ï¼Œå¦‚ <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>ï¼Œå°±å¯ä»¥æ­£å¸¸é‹ä½œäº†ã€‚</p>
<hr>

<h3 id="Vue-2-0-å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ"><a href="#Vue-2-0-å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ" class="headerlink" title="Vue 2.0 å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ"></a>Vue 2.0 å…ƒä»¶å¯¦é«”çš„ç”Ÿå‘½é€±æœŸ</h3><p><img alt="Vue 2.0 Lifecycle Diagram" title="Vue 2.0 Lifecycle Diagram" src="/static/img/vue2-lifecycle.png" height="400">
<span style="font-size: 12px;">åœ–ç‰‡ä¾†æºï¼š <a href="http://vuejs.org/guide/instance.html#Instance-Lifecycle-Hooks" target="_blank" rel="external">Vue 2.0 Guide: Instance Lifecycle Hooks</a></span></p>
<p>åŸºæœ¬ä¸Š Vue 2.0 å¯¦é«”ç”Ÿå‘½é€±æœŸä¸­ï¼Œå¤§éƒ¨åˆ†çš„éšæ®µéƒ½èˆ‡ Vue 1.x æ˜¯ä¸€æ¨£çš„ï¼Œæœ€å¤§çš„ä¸åŒåœ¨æ–¼ lifecycle hook åç¨±çš„æ”¹è®Šï¼Œä»¥åŠåœ¨å…ƒä»¶è¢«æ›è¼‰ <code>mounted</code> ä¹‹å¾Œï¼Œé‚„æ–°å¢äº† <code>beforeUpdate</code> ä»¥åŠ <code>updated</code> é€™å…©çµ„åµæ¸¬æ›´æ–°çš„ hookã€‚</p>
<p>vue 1.x çš„ <code>init</code> è®Šæˆ <code>beforeCreate</code> ï¼Œ <code>beforeCompiled</code> æ”¹ç‚º <code>beforeMount</code>ã€‚ è€ŒåŸæœ¬çš„ <code>complied</code> èˆ‡ <code>ready</code> å‰‡æ˜¯çµ±ä¸€æ”¶æ–‚æˆ <code>mounted</code>ã€‚</p>
<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<span style="color: #f00"><strong>è‹¥å…ƒä»¶æœ¬èº«æ˜¯é€é server-side rendering çš„è©±ï¼Œé™¤äº† <code>beforeCreate</code> ä»¥åŠ <code>created</code> ä»¥å¤–çš„æ‰€æœ‰ hook éƒ½ä¸æœƒè¢«å‘¼å«</strong></span>  <a href="https://vuejs.org/api/#Options-Lifecycle-Hooks" target="_blank" rel="external">(åƒè€ƒè³‡æ–™)</a>ã€‚</p>
<p>æœ‰é—œå…ƒä»¶ V-DOM çš„é‡æ–°æ¸²æŸ“èˆ‡æ›´æ–°å¾Œé¢å†æï¼Œå…¶ä»–éƒ¨åˆ†å‰‡èˆ‡ Vue 1.x å¤§åŒå°ç•°ã€‚</p>
<p><hr></p>
<h3 id="Vue-2-0-å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯-Render-Function"><a href="#Vue-2-0-å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯-Render-Function" class="headerlink" title="Vue 2.0 å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯ - Render Function"></a>Vue 2.0 å…ƒä»¶èˆ‡æ¨¡æ¿çš„ç·¨è­¯ - Render Function</h3><p>åœ¨å¤§éƒ¨åˆ†æƒ…æ³ä¸‹ï¼Œé€éå…ƒä»¶çš„ <code>template</code> å±¬æ€§ï¼Œæˆ–æ˜¯ç›´æ¥å¯«åœ¨ HTML ä¸­å°±å·²ç¶“è¶³å¤ æ“ä½œä½ çš„å…ƒä»¶äº†ã€‚
ä¸éè‹¥æ˜¯ä½ æƒ³å®Œå…¨é€é JavaScript ä¾†æ“ä½œä½ çš„å…ƒä»¶ï¼Œé‚£éº¼å¯ä»¥ä½¿ç”¨ render é€™å€‹ function ç›´æ¥ä¾†å¯«åº•å±¤çš„ virtual-DOM ä¾†å–ä»£ <code>template</code> å±¬æ€§ã€‚
VueJS 2.0 çš„ virtual DOM æ©Ÿåˆ¶ï¼Œæ˜¯æ¡ç”¨ <a href="https://github.com/snabbdom/snabbdom" title="snabbdom" target="_blank" rel="external">snabbdom</a> é€™å€‹ virtual DOM çš„ library ä¾†å¯¦ä½œçš„ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ <code>createElement</code> é€™å€‹ function ä¾†å»ºç«‹ä½ çš„å…ƒä»¶å…§å®¹ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// @returns &#123;VNode&#125;</span></div><div class="line">createElement(</div><div class="line">  <span class="comment">// &#123;String | Object | Function&#125;</span></div><div class="line">  <span class="comment">// An HTML tag name, component options, or function</span></div><div class="line">  <span class="comment">// returning one of these. Required.</span></div><div class="line">  <span class="string">'div'</span>,</div><div class="line">  <span class="comment">// &#123;Object&#125;</span></div><div class="line">  <span class="comment">// A data object corresponding to the attributes</span></div><div class="line">  <span class="comment">// you would use in a template. Optional.</span></div><div class="line">  &#123;</div><div class="line">    <span class="comment">// (see details in the next section below)</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// &#123;String | Array&#125;</span></div><div class="line">  <span class="comment">// Children VNodes. Optional.</span></div><div class="line">  [</div><div class="line">    createElement(<span class="string">'h1'</span>, <span class="string">'hello world'</span>)</div><div class="line">    createElement(MyComponent, &#123;</div><div class="line">      <span class="attr">props</span>: &#123;</div><div class="line">        <span class="attr">someProp</span>: <span class="string">'foo'</span></div><div class="line">      &#125;</div><div class="line">    &#125;),</div><div class="line">    <span class="string">'bar'</span></div><div class="line">  ]</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€å€‹å®Œæ•´çš„ render function ç¯„ä¾‹ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> getChildrenTextContent = <span class="function"><span class="keyword">function</span> (<span class="params">children</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> children.map(<span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> node.children</div><div class="line">      ? getChildrenTextContent(node.children)</div><div class="line">      : node.text</div><div class="line">  &#125;).join(<span class="string">''</span>)</div><div class="line">&#125;</div><div class="line">Vue.component(<span class="string">'anchored-heading'</span>, &#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params">createElement</span>) </span>&#123;</div><div class="line">    <span class="comment">// create kebabCase id</span></div><div class="line">    <span class="keyword">var</span> headingId = getChildrenTextContent(<span class="keyword">this</span>.$slots.default)</div><div class="line">      .toLowerCase()</div><div class="line">      .replace(<span class="regexp">/\W+/g</span>, <span class="string">'-'</span>)</div><div class="line">      .replace(<span class="regexp">/(^\-|\-$)/g</span>, <span class="string">''</span>)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> createElement(</div><div class="line">      <span class="string">'h'</span> + <span class="keyword">this</span>.level,</div><div class="line">      [</div><div class="line">        createElement(<span class="string">'a'</span>, &#123;</div><div class="line">          <span class="attr">attrs</span>: &#123;</div><div class="line">            <span class="attr">name</span>: headingId,</div><div class="line">            <span class="attr">href</span>: <span class="string">'#'</span> + headingId</div><div class="line">          &#125;</div><div class="line">        &#125;, <span class="keyword">this</span>.$slots.default)</div><div class="line">      ]</div><div class="line">    )</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">props</span>: &#123;</div><div class="line">    <span class="attr">level</span>: &#123;</div><div class="line">      <span class="attr">type</span>: <span class="built_in">Number</span>,</div><div class="line">      <span class="attr">required</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>ç•¶ç„¶ï¼Œä½ å¯èƒ½è·Ÿæˆ‘ä¸€æ¨£è¦ºå¾—ä¸€å±¤åˆä¸€å±¤çš„ <code>createElement</code> çœ‹äº†ç¸½æ˜¯è®“äººå­ç…©ï¼Œä½ ä¹Ÿå¯ä»¥é€éé€™å€‹ Plugin: <a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx" target="_blank" rel="external">babel-plugin-transform-vue-jsx</a>ï¼Œä¾†åš JSX èªæ³•çš„è½‰æ›ï¼Œå¦‚æœä½ æ›¾æ˜¯ react æ‡‰ç”¨ç¨‹å¼çš„é–‹ç™¼è€…ï¼Œæ‡‰è©²å° JSX èªæ³•ä¸é™Œç”Ÿã€‚ å¯«èµ·ä¾†æœƒåƒé€™æ¨£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> AnchoredHeading <span class="keyword">from</span> <span class="string">'./AnchoredHeading.vue'</span></div><div class="line"></div><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#demo'</span>,</div><div class="line">  render (h) &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;AnchoredHeading level=&#123;1&#125;&gt;</div><div class="line">        &lt;span&gt;Hello&lt;/span&gt; world!</div><div class="line">      &lt;/AnchoredHeading&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>åœ¨é è¨­æƒ…æ³ä¸­ï¼ŒVueJS 2.0 æœƒå°‡ <code>template</code> å…§çš„ HTML é€é parse è½‰æ›æˆ ASTï¼Œå†è‡ªå‹•è½‰æ›å„ªåŒ–æˆ render function å»å»ºç«‹ virtual DOMã€‚ åœ¨å»ºç«‹ virtual DOM ä¹‹å¾Œï¼Œé€é observe æ©Ÿåˆ¶èˆ‡è³‡æ–™é€²è¡Œç¶å®šï¼Œå† compile æˆå¯¦é«”çš„ DOM ä¸¦æ¸²æŸ“è‡³ç¶²é ä¸Šï¼š</p>
<p><img src="/static/img/vue2-rendering-flow.png">
<span style="font-size: 12px;">åƒè€ƒè³‡æ–™èˆ‡åœ–ç‰‡ä¾†æºï¼š <a href="https://speakerdeck.com/kazupon/next-vue-dot-js-2-dot-0" target="_blank" rel="external">Next Vue.js 2.0 by kazupon</a></span></p>
<p>å‰é¢èªªéï¼ŒVueJS 2.0 æœƒå°‡ <code>template</code> å…§çš„ HTML è‡ªå‹•ç·¨è­¯æˆ render functionï¼Œä¸‹é¢é€™æ˜¯å®˜æ–¹æ–‡ä»¶ä»¥ <code>Vue.compile</code> æä¾›çš„ demoï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- template --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>I'm a template!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"message"</span>&gt;</span></div><div class="line">    &#123;&#123; message &#125;&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span></div><div class="line">    No message.</div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// render:</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">anonymous</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">with</span>(<span class="keyword">this</span>)&#123;<span class="keyword">return</span> _h(<span class="string">'div'</span>,[_m(<span class="number">0</span>),(message)?_h(<span class="string">'p'</span>,[_s(message)]):_h(<span class="string">'p'</span>,[<span class="string">"No message."</span>])])&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// staticRenderFns:</span></div><div class="line">_m(<span class="number">0</span>): <span class="function"><span class="keyword">function</span> <span class="title">anonymous</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">with</span>(<span class="keyword">this</span>)&#123;<span class="keyword">return</span> _h(<span class="string">'h1'</span>,[<span class="string">"I'm a template!"</span>])&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><hr></p>
<h3 id="Vue-2-0-å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–"><a href="#Vue-2-0-å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–" class="headerlink" title="Vue 2.0 å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–"></a>Vue 2.0 å…ƒä»¶çš„è¿½è¹¤è®ŠåŒ–</h3><p>æœ€å¾Œï¼Œæˆ‘å€‘ä¾†çœ‹çœ‹å…ƒä»¶å…§ç‹€æ…‹çš„è¿½è¹¤è®ŠåŒ–ã€‚æœ‰å¯«é VueJS 1.x çš„æœ‹å‹æ‡‰è©²çŸ¥é“ï¼Œå…ƒä»¶å¯¦é«”å…§æœ‰å€‹ option å« <code>data</code>ï¼Œ
é€™å€‹ <code>data</code> ç‰©ä»¶å°±æ˜¯ç”¨ä¾†å­˜æ”¾å…ƒä»¶å…§ç‹€æ…‹/è³‡æ–™çš„åœ°æ–¹ã€‚</p>
<p>èˆ‡ Vue 1.x ç›¸åŒçš„åœ°æ–¹æ˜¯ï¼Œ<code>data</code> ç‰©ä»¶é€é <code>Object.defineProperty()</code> ä¾†ç‚ºå…ƒä»¶å…§å„å±¬æ€§è¨­å®š ã€Œgetterã€èˆ‡ã€Œsetterã€ã€‚
å°±åœ¨ data å±¬æ€§è¢«å­˜å–ä¿®æ”¹æ™‚ï¼Œæœƒé€é getter/setter ä¾†é€šçŸ¥ç‰©ä»¶å…§å±¬æ€§çš„è®ŠåŒ–ï¼Œç•¶å…ˆå‰è¨­å®šå¥½çš„ setter è¢«å‘¼å«çš„æ™‚å€™ï¼Œæœƒå»è§¸ç™¼ watcher é‡æ–°è¨ˆç®—ï¼Œä¹Ÿå°±æœƒå°è‡´ DOM çš„æ›´æ–°èˆ‡é‡æ–°æ¸²æŸ“ã€‚</p>
<p>èˆ‡ Vue 1.x ä¸åŒçš„æ˜¯ï¼ŒVue 1.x æ˜¯é€é directive ä¾†é‡æ–°æ¸²æŸ“ DOM å…§å®¹ï¼š</p>
<p><img src="/static/img/vue1-watcher.png"></p>
<p>è€Œ Vue 2.0 åœ¨é€šçŸ¥ watcher æ›´æ–°æ™‚ï¼Œæœƒå»å‘¼å«å‰é¢ä»‹ç´¹çš„ ã€Œrender functionã€èˆ‡æ›´æ–°å¾Œçš„ data å»åšæ›´æ–°å¾Œå†æ¬¡æ¸²æŸ“ï¼Œæ¦‚å¿µèˆ‡ 1.x å¤§è‡´ç›¸åŒã€‚
ä½†æ›´æ–° DOM çš„æ‰‹æ³•ä¸åŒï¼Œæ¸›å°‘äº†ä¸å¿…è¦çš„æ¯”å°ï¼Œä¹Ÿå› æ­¤å¤§å¹…åº¦æå‡äº†æ•ˆèƒ½ã€‚</p>
<p><img src="/static/img/vue2-watcher.png"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[VueJS 2.0 å‡ç´šå°å¹«æ‰‹: Vue migration helper]]></title>
      <url>http://kuro.tw/posts/2016/09/30/Vue-2-0-%E5%8D%87%E7%B4%9A%E5%B0%8F%E5%B9%AB%E6%89%8B-Vue-migration-helper/</url>
      <content type="html"><![CDATA[<p>Vue JS è‡ªä»Šå¹´å››æœˆ (2016/04) ç™¼ä½ˆ Vue 2.0 preview ç‰ˆæœ¬è‡³ä»Šä¹Ÿæœ‰äº”å€‹æœˆäº†ï¼Œåœ¨æ–°èˆŠç‰ˆæœ¬çš„äº¤æ›¿ä¹‹ä¸­ï¼Œé–‹ç™¼è€…æœ€é—œå¿ƒçš„ä¸€å®šæ˜¯ã€Œ<strong>æˆ‘çš„å°ˆæ¡ˆèƒ½ä¸èƒ½å‡åˆ° Vue 2.0</strong>ã€ã€ã€Œ<strong>å‡ä¸Šå»æœƒä¸æœƒçˆ†</strong>ã€ã€ã€Œ<strong>å°ˆæ¡ˆè©²ç”¨é‚£å€‹ç‰ˆæœ¬ä¾†é–‹ç™¼</strong>ã€ï¼Œ<del>ã€Œè½èªªéš”å£é‚£å€‹ ng å‡ç´šå¹¾ä¹ç­‰æ–¼ç æ‰é‡ç·´ã€</del> ä¹‹é¡çš„å•é¡Œã€‚</p>
<p>ä¸éå¹¸å¥½ï¼ŒVue 1.0 èˆ‡ Vue 2.0 æœ‰ 90% çš„ API æ˜¯ç›¸åŒçš„ï¼Œéå»åœ¨ Vue 1.x çš„æ ¸å¿ƒæ¦‚å¿µåˆ° Vue 2.0 ä¸€æ¨£å¯ä»¥æ²¿ç”¨ï¼Œè€Œä¸”åˆå¤šäº†äº›æ–°ç‰¹æ€§ã€‚</p>
<p>é€™è£¡æœ‰ä¸€ä»½å®˜æ–¹çš„<a href="http://rc.vuejs.org/guide/migration.html" title="Migration from Vue 1.x" target="_blank" rel="external">å‡ç´šå»ºè­°</a>ï¼Œæœ‰é»é•·ï¼Œå¦‚æœæ²’æœ‰è€å¿ƒè®€çš„è©±ï¼Œæ²’é—œä¿‚ï¼Œé€™è£¡ä»‹ç´¹ä½ å¥½ç‰©: <br> <strong><span style="color: #f00;">Vue migration helper</span></strong>ã€‚</p>
<p>å‚³èªªä¸­çš„å‡ç´šå°å¹«æ‰‹ Vue migration helper: <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">https://github.com/vuejs/vue-migration-helper</a></p>
<p>ä½¿ç”¨æ–¹å¼å¾ˆç°¡å–®ï¼Œæ‰“é–‹ terminal é€é npm å®‰è£å¾Œï¼Œåœ¨ä½ çš„å°ˆæ¡ˆç›®éŒ„ä¸‹åŸ·è¡Œ vue-migration-helperï¼Œå°å¹«æ‰‹å°±æœƒå¹«ä½ æƒææ•´ä»½å°ˆæ¡ˆï¼Œç„¶å¾Œçµ¦ä½ ä¿®æ”¹çš„å»ºè­°äº†ã€‚</p>
<p>å®Œæ•´çš„å®‰è£èˆ‡ä½¿ç”¨æ–¹å¼ï¼š
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># install</div><div class="line">$ npm install --global git://github.com/vuejs/vue-migration-helper.git</div><div class="line"></div><div class="line"># navigate to a Vue 1.x project directory</div><div class="line">$ cd path/to/my-vue-project</div><div class="line"></div><div class="line"># scan all files in the current directory</div><div class="line">$ vue-migration-helper</div></pre></td></tr></table></figure></p>
<p>æ‹¿ä¹‹å‰çš„æŸä»½ç¯„ä¾‹è©¦è©¦ï¼Œå°±åƒé€™æ¨£ï¼š</p>
<p><del>èŠ±æƒ¹ç™¼</del>ï¼Œæ»¿å‘æ»¿è°·çš„å‡ç´šå»ºè­°
<img src="/static/img/vue-migration-demo.png" alt="migration"></p>
<p>ä¾ç…§ migration helper çµ¦çš„å»ºè­°ä¸€ä¸€ä¿®æ­£å¾Œï¼Œå†æ¬¡åŸ·è¡Œå°ˆæ¡ˆï¼Œæª¢æŸ¥ä¸€ä¸‹ consoleï¼Œæ˜¯å¦æœ‰å™´éŒ¯ï¼Œå¦‚æœæ²’æœ‰éŒ¯èª¤ï¼Œé‚£éº¼å°ˆæ¡ˆçš„å‡ç´šä¹Ÿå°±å·®ä¸å¤šäº†ã€‚</p>
<p>ä¸éè¦æ³¨æ„ï¼Œç›®å‰ Vue migration helper é‚„åœ¨ beta éšæ®µï¼Œå¦‚æœæœªä¾†è¦å†æ›´æ–°è‡³æ–°ç‰ˆçš„è©±ï¼Œç›´æ¥å†æ¬¡åŸ·è¡Œ <code>npm install --global git://github.com/vuejs/vue-migration-helper.git</code> é‡æ–°å®‰è£ä¸€æ¬¡å°±å¥½ã€‚</p>
<p>æœ€å¾Œï¼Œé„‰è¦ªå•Šï¼Œå¦‚æœä½ æ­£è¦é–‹å•Ÿæ–°å°ˆæ¡ˆï¼Œå»ºè­°ç¾åœ¨å°±å¯ä»¥ç›´æ¥å¾ Vue 2.0 é€²å…¥å–”ï¼</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[Vue.js] åœ¨ v-for åˆ—è¡¨ä¸­é€é filter å®Œæˆæœå°‹èˆ‡åˆ†é çš„åŠŸèƒ½]]></title>
      <url>http://kuro.tw/posts/2016/05/30/vuejs-in-v-for-through-the-filter-in-the-list-complete-search-and-page-functions/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘ <a href="https://vuejs.org/" target="_blank" rel="external">Vue.js</a> æ­£å¤¯ï¼Œæ‰€ä»¥æ‰‹ä¸Šå¹¾å€‹æ±è¥¿æ‰“ç®—ç”¨é€™å€‹ä¾†æ”¹å¯«ï¼Œé—œæ–¼ Vue.js çš„åŸºæœ¬ä»‹ç´¹å¯ä»¥åƒè€ƒå°å¼Ÿçš„æŠ•å½±ç‰‡ï¼Œé€™è£¡å°±ä¸å†è´…è¿°ã€‚</p>
<iframe src="//www.slideshare.net/slideshow/embed_code/key/DLQDvLrRSNunsY" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:10px; max-width: 100%;" allowfullscreen> </iframe>

<p>æœ‰ç”¨é Vue.js é–‹ç™¼çš„æœ‹å‹ä¸€å®šçŸ¥é“å®ƒæä¾›çš„ filter åŠŸèƒ½ååˆ†å¼·å¤§ï¼Œåœ¨ <code>v-for</code> åˆ—è¡¨ä¸­ä½¿ç”¨ <code>filterBy</code> å¯ä»¥åœ¨ä¸€è¡Œå…§å®Œæˆåˆ—è¡¨æœå°‹çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"filter-by-example"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"n"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- é€é input æ¬„ä½çš„ v-model n èˆ‡ user.name åšæ¨¡ç³Šæ¯”å° --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"user in users | filterBy n in 'name'"</span>&gt;</span></div><div class="line">      &#123;&#123; user.name &#125;&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è‹¥æ˜¯è¦é™åˆ¶é¡¯ç¤ºçš„ç­†æ•¸ä¹Ÿèƒ½ç”¨ <code>limitBy</code> åšåˆ°ï¼Œé€²è€Œå®Œæˆåˆ†é çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- åªé¡¯ç¤ºå‰ 10 å€‹å…ƒç´  --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in items | limitBy 10"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- é¡¯ç¤ºç¬¬ 5 åˆ° 15 ç­†å…ƒç´ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in items | limitBy 10 5"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>é€™æ¬¡é‡åˆ°çš„å•é¡Œæ˜¯é€™æ¨£çš„ï¼Œå¦‚æœæˆ‘å€‘æƒ³è¦åŒæ™‚å®Œæˆã€Œæœå°‹ã€èˆ‡ã€Œåˆ†é ã€çš„éœ€æ±‚ï¼Œå…‰é  <code>filterBy</code> èˆ‡ <code>limitBy</code> å°±ä¸æ˜¯é‚£éº¼å®¹æ˜“åšåˆ°ï¼Œé‚„å¥½ Vue.js æä¾›äº†<a href="http://vuejs.org/guide/custom-filter.html" target="_blank" rel="external">è‡ªè¨‚ filter</a> çš„åŠŸèƒ½ï¼šå…ˆç”¨ filterBy éæ¿¾ï¼Œå†é€éè‡ªè¨‚ recordLength è¨˜éŒ„éæ¿¾å¾Œçš„è³‡æ–™æ•¸é‡ï¼Œæœ€å¾Œå†ç”¨ limitBy æ­é…é ç±¤åˆ‡æ›é é¢ã€‚
å°å¿ƒ filter çš„é †åºï¼Œfilter æœƒä¾åºåŸ·è¡Œï¼Œç„¶å¾Œå†ç¹¼çºŒä¸‹å€‹ filterã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">" r in rows</span></span></div><div class="line">             | filterBy filter_name in 'name'</div><div class="line">             | recordLength 'filteredRowCount'</div><div class="line">             | limitBy countOfPage pageStart "&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>......<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ç„¶å¾Œæ˜¯è‡ªå®šçš„ filter <code>recordLength</code>ï¼š
result ä»£è¡¨å‚³å…¥çš„è³‡æ–™ï¼Œ key å‰‡æ˜¯å¾ view å¸¶å…¥çš„åƒæ•¸ï¼Œé€™å€‹ç¯„ä¾‹æ˜¯ <code>filteredRowCount</code>ã€‚</p>
<p>é€™è£¡é€é <code>vm.$set</code> ä¾†å°‡éæ¿¾å¾Œçš„æ•¸é‡æŒ‡å®šè‡³ vue å¯¦é«”ï¼Œä»¥ä¾¿å¯ä»¥ç›´æ¥åœ¨ Vue å¯¦é«”ä½¿ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Vue.filter(<span class="string">'recordLength'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">result, key</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.$set(key, result.length);</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æœ€å¾Œåœ¨é ç±¤çš„éƒ¨åˆ†ï¼Œæˆ‘å€‘å°±å¯ä»¥ç°¡å–®é€é <code>filter_name</code> æ¬„ä½æ˜¯å¦ç©ºç™½ä¾†åˆ‡æ›æ˜¯å¦é€é <code>filteredRowCount</code> è¨ˆç®—ç¸½é æ•¸:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">totalPage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>( <span class="keyword">this</span>.filter_name.trim() === <span class="string">''</span> ) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.rows.length / <span class="keyword">this</span>.countOfPage);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.filteredRowCount / <span class="keyword">this</span>.countOfPage);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®Œæ•´çš„ <a href="http://jsbin.com/bimawidora/1/edit?html,js,output" target="_blank" rel="external">demo</a> å¦‚ä¸‹:</p>
<p><a class="jsbin-embed" href="http://jsbin.com/bimawidora/embed?output" target="_blank" rel="external">JS Bin on jsbin.com</a><script src="http://static.jsbin.com/js/embed.min.js?3.35.12"></script></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[åˆ©ç”¨ d3.js è£½ä½œ responsive çš„é•·æ¢åœ–]]></title>
      <url>http://kuro.tw/posts/2015/12/20/use-d3js-to-create-responsive-histogram/</url>
      <content type="html"><![CDATA[<p>åˆ©ç”¨ d3.js æˆ‘å€‘å¯ä»¥å¾ˆè¼•æ˜“åœ°ç”¢ç”Ÿæˆ‘å€‘æƒ³è¦çš„åœ–è¡¨ï¼Œä»¥æœ€å¸¸è¦‹çš„é•·æ¢åœ–ç‚ºä¾‹ï¼Œåªè¦é€é scale (æ¯”ä¾‹å°º) èˆ‡ axis (è»¸ç·š)ï¼Œå†åŠ ä¸Šä¸€é» SVG çš„åŸºç¤çŸ¥è­˜ï¼Œåƒé€™æ¨£çš„é•·æ¢åœ–ä¸€ä¸‹å­å°±å¯ä»¥ç”Ÿæˆã€‚</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/2V8wHgLUTEawU5iJstYS_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%8812.21.25.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ12.21.25.png">
[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd.html" title="é•·æ¢åœ–ç¯„ä¾‹" target="_blank" rel="external">Code</a>]</p>
<p>ä½†æ˜¯ï¼Œåƒé€™æ¨£å°ºå¯¸çš„åœ–è¡¨ï¼Œå¾€å¾€éƒ½æœƒå› ç‚ºå¤ªå¤§è€Œä¸é©åˆåœ¨æ‰‹æ©Ÿè¢å¹•ä¸Šå‘ˆç¾ã€‚é‚„å¥½ SVG æœ‰è‘—å‘é‡åœ–å½¢çš„ç‰¹æ€§ï¼Œå¯ä»¥è‡ªç”±ç¸®æ”¾ï¼Œé€™ç¯‡å°±ä¾†ç°¡å–®ä»‹ç´¹ d3.js çš„é•·æ¢åœ–å¦‚ä½•ä¹Ÿèƒ½åšå‡º rwd çš„æ•ˆæœã€‚</p>
<p>åœ¨ä¸Šé¢çš„ç¨‹å¼ç¢¼å…§ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°ï¼ŒåŸå…ˆè¨­å®šçš„å¯¬é«˜æ˜¯å¯«æ­»çš„ 960 èˆ‡ 500 (æœªæ‰£é™¤é‚Šç•Œ)
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> margin = <span class="number">40</span>,</div><div class="line">    width = <span class="number">960</span> - margin*<span class="number">2</span>,</div><div class="line">    height = <span class="number">500</span> - margin*<span class="number">2</span>;</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ç¬¬ä¸€æ­¥ï¼Œæˆ‘å€‘å…ˆå°‡å¤–å±¤çš„ <code>.content</code> å…ƒç´ è¨­å®šæˆå¯¬é«˜ 100%ï¼Œç„¶å¾ŒæŠŠåŸå…ˆå¯«æ­»çš„å¯¬é«˜æ”¹æˆç”±ç¨‹å¼å»æŠ“å–å¯¦éš›çš„å¯¬é«˜
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.content</span>&#123;</div><div class="line">  <span class="attribute">display</span>: block;</div><div class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">min-width</span>: <span class="number">300px</span>;</div><div class="line">  <span class="attribute">max-width</span>: <span class="number">960px</span>;</div><div class="line">  <span class="attribute">max-height</span>: <span class="number">500px</span>;</div><div class="line">  <span class="attribute">overflow</span>: hidden;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å°‡å°ºå¯¸æ”¹æˆå³æ™‚å–å¾—çš„å¯¬é«˜</span></div><div class="line">width = <span class="built_in">parseInt</span>(d3.select(<span class="string">".content"</span>).style(<span class="string">"width"</span>), <span class="number">10</span>) - margin*<span class="number">2</span>;</div><div class="line">height = <span class="built_in">parseInt</span>(d3.select(<span class="string">".content"</span>).style(<span class="string">"height"</span>), <span class="number">10</span>) - margin*<span class="number">2</span>;</div></pre></td></tr></table></figure>
<p>ç„¶å¾Œæˆ‘å€‘å°‡ç€è¦½å™¨ç¸®å°ä¹‹å¾Œé‡æ•´ï¼Œçµæœåƒé€™æ¨£ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/Jrbqo6EaTJswhfBQUF6g_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.23.36.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.23.36.png">
[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd2.html" title="é•·æ¢åœ–ç¯„ä¾‹2" target="_blank" rel="external">Code</a>]</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé€™å€‹æ™‚å€™å› ç‚ºç•«é¢çš„å¯¬é«˜å·²ç¶“ä¸æ˜¯å¯«æ­»çš„äº†ï¼Œæ‰€ä»¥æœƒä¾ã€Œç¹ªè£½åœ–å½¢ç•¶ä¸‹ã€çš„å¯¬é«˜å»åšæ¯”ä¾‹çš„ä¿®æ­£ã€‚é€™æ™‚æˆ‘å€‘å·²ç¶“å®Œæˆäº†é•·æ¢åœ– RWD çš„ç¬¬ä¸€æ­¥äº†ã€‚</p>
<p>é€™æ™‚è¦æ˜¯å°‡è¡Œå‹•è£ç½®è¢å¹•æ©«æ“ºå¾Œï¼Œæ¯”ä¾‹ä¸¦ä¸æœƒä¾ç…§æ©«æ“ºä¹‹å¾Œæœ‰æ‰€ä¸åŒï¼Œå¦‚æœè¦ä½¿ç”¨è€…ä¸æ–·åœ°é‡æ•´é é¢ï¼Œé€™å°±å¤ªä¸å‹å–„äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘å€‘è¦åœ¨ç€è¦½å™¨ä¸ŠåŠ ä¸Š <code>resize</code> äº‹ä»¶ï¼Œä¸¦å°‡ç¹ªè£½åœ–å½¢çš„å‹•ä½œé€šé€šå°è£è‡³ rendering é€™å€‹ function å…§ã€‚</p>
<p>é€™å€‹æ™‚å€™çš„ç¨‹å¼æ¶æ§‹æœƒåƒé€™æ¨£ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> svg = d3.select(<span class="string">'.svg'</span>);</div><div class="line"></div><div class="line"><span class="comment">// å°‡ç¹ªè£½å‹•ä½œåŒ…è£è‡³ function å…§</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">rendering</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="comment">// å°‡ç¹ªè£½çš„ç¨‹å¼ç¢¼é€šé€šæ¬åˆ°è£¡é¢</span></div><div class="line">   <span class="comment">// å…§ç•¥</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å°‡ window ç¶å®š resize äº‹ä»¶ï¼Œä¸¦é‡æ–°ç¹ªè£½åœ–å‹</span></div><div class="line">d3.select(<span class="built_in">window</span>).on(<span class="string">'resize'</span>, rendering);</div><div class="line"></div><div class="line"><span class="comment">// é¦–æ¬¡ç¹ªè£½</span></div><div class="line">rendering();</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ï¼Œé€™å€‹æ™‚å€™ï¼Œæˆ‘å€‘å¯ä»¥ä»»æ„æ‹‰æ”¾ç€è¦½å™¨çš„å°ºå¯¸
åƒé€™æ¨£
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/eTI8r7EXSQWaH80HZuKH_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.39.54.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.39.54.png"></p>
<p>æˆ–æ˜¯é€™æ¨£
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/NMpkG3LeTOWaYaNf9pYC_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.40.01.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.40.01.png"></p>
<p>[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd3.html" title="é•·æ¢åœ–ç¯„ä¾‹3" target="_blank" rel="external">Code</a>]
éƒ½æ˜¯æ²’æœ‰å•é¡Œçš„ã€‚</p>
<p>é€™ä»½é•·æ¢åœ–åˆ°ç›®å‰ç‚ºæ­¢å·²ç¶“å¯ä»¥èªªæ˜¯å¥½æ£’æ£’äº†ã€‚
å¯æ˜¯ä¸æ›‰å¾—æœ‰æ²’æœ‰äººç™¼ç¾ï¼Œåœ¨æœ€å¾Œé‚£å¼µæ©«æ“ºçš„ y è»¸åˆ»åº¦å¯¦åœ¨å¤ªéæ“æ“ ï¼Œå…¶å¯¦æ˜¯ä¸å®¹æ˜“é–±è®€çš„:
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/VA6ir3TRyutauy6ALqdH_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.42.43.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.42.43.png"></p>
<p>æˆ‘å€‘å¯ä»¥æ€éº¼æ¨£æ›´å„ªåŒ–å‘¢ï¼Ÿ</p>
<p>é€™æ™‚å€™å°±è¦åˆ©ç”¨ d3.js æä¾›çš„ <code>tick()</code> åŠŸèƒ½ï¼Œä¾†ç‚ºæˆ‘å€‘èª¿æ•´ y è»¸ä¸Šçš„åˆ»åº¦ã€‚
åªè¦åœ¨ y è»¸ä¸ŠåŠ ä¸Š tick ï¼Œåƒé€™æ¨£:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// y è»¸åŠ ä¸Š ticks</span></div><div class="line"><span class="keyword">var</span> yAxis = d3.svg.axis()</div><div class="line">      .scale(yScale2)</div><div class="line">      .orient(<span class="string">"left"</span>)</div><div class="line">      .ticks(<span class="built_in">Math</span>.max(height/<span class="number">50</span>, <span class="number">2</span>));</div></pre></td></tr></table></figure>
<p><code>Math.max</code> æœƒå›å‚³å…©å€‹æŒ‡å®šæ•¸å­—ä¸­è¼ƒå¤§çš„ä¸€å€‹ï¼Œè€Œ <code>ticks()</code> å‰‡æ˜¯è¨­å®šè»¸ç·šä¸Šåˆ»åº¦çš„æ•¸é‡ã€‚</p>
<p>æ‰€ä»¥ç¶“éå‰›å‰›çš„è¨­å®šï¼Œç•¶åœ–å½¢çš„é«˜åº¦å¤§æ–¼ 100px çš„æ™‚å€™ï¼Œåœ–è¡¨æ¯ 50px æœƒæœ‰ä¸€å€‹åˆ»åº¦ï¼Œè€Œåœ–å½¢é«˜åº¦å°æ–¼æˆ–ç­‰æ–¼ 100px æ™‚ï¼Œå‰‡è‡³å°‘æœƒæœ‰å…©å€‹åˆ»åº¦ï¼Œåƒé€™æ¨£ï¼š</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/Mz3vq9BKRZ2dkSd5SP6W_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.54.29.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.54.29.png"></p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/swZcbhnQPmhiWQBwTbDG_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-12-20%20%E4%B8%8B%E5%8D%881.55.08.png" alt="è¢å¹•å¿«ç…§ 2015-12-20 ä¸‹åˆ1.55.08.png"></p>
<p>[<a href="http://kurotanshi.github.io/d3js-samples/rwd/rwd4.html" title="é•·æ¢åœ–ç¯„ä¾‹4" target="_blank" rel="external">Code</a>]</p>
<p>å¯¦éš›ç”¨æ‰‹æ©Ÿè©¦è©¦ï¼š</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/mM3agzeTGGGdM2p4YjZq_2015-12-20%2003.33.30.png" alt="2015-12-20 03.33.30.png">
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/378297/j4wccnAOTZWhLzubTUDw_2015-12-20%2003.33.43.png" alt="2015-12-20 03.33.43.png"></p>
<p>é€éé€™æ¨£çš„ä¿®æ­£ï¼Œå°±å¯ä»¥è®“åœ–è¡¨è®Šå¾—æ›´å¥½é–±è®€äº†ã€‚</p>
<p>ä»¥ä¸Šï¼Œæˆ‘å€‘åªè¦åšç°¡å–®çš„å°èª¿æ•´ï¼Œå°±å¯ä»¥è®“ç¾æœ‰çš„ d3 é•·æ¢åœ–åšåˆ°æœ‰ RWD çš„æ•ˆæœã€‚</p>
<p>ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ˜¯æ‰€æœ‰åœ–è¡¨éƒ½åˆé©åœ¨æ‰‹æ©Ÿè¢å¹•ä¸Šå‘ˆç¾ï¼Œåœ¨è¨­è¨ˆæ™‚ä¹Ÿéœ€è¦æŠŠé€™äº›è€ƒæ…®é€²å»ï¼Œæ˜¯è¦ç‚ºæ‰‹æ©Ÿç‰ˆæœ¬å¦å¤–åšä¸€å€‹æ–°çš„åœ–è¡¨ï¼Œæˆ–æ˜¯åš RWD çš„è¨­è¨ˆï¼Œå°±çœ‹ä½¿ç”¨çš„æƒ…å¢ƒä»¥åŠæƒ³è¡¨é”çš„æ„ç¾©ä¾†æ±ºå®šå›‰ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[åˆ©ç”¨ Google Fusion Tableï¼Œä¸ç”¨å¯« code ä¹Ÿå¯ä»¥ç”¢ç”Ÿä¸»é¡Œåœ°åœ–]]></title>
      <url>http://kuro.tw/posts/2015/10/15/using-google-fusion-table-without-writing-code-or-topic-maps/</url>
      <content type="html"><![CDATA[<p>æ„Ÿè¬å°åŒ—å¸‚æ”¿åºœä»¥åŠ<a href="https://www.facebook.com/photo.php?fbid=10204828212414899&amp;set=a.1357755313713.2044236.1526408898&amp;type=3" target="_blank" rel="external">ç›¸é—œäººå£«çš„åŠªåŠ›</a>ï¼Œåœ¨åæœˆä¸­æ—¬çš„æ™‚å€™ï¼Œå°åŒ—å¸‚ open data å¹³å°åˆé–‹æ”¾äº†ã€Œ<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=68785231-d6c5-47a1-b001-77eec70bec02" target="_blank" rel="external">å°åŒ—å¸‚ä½å®…ç«Šç›œé»ä½è³‡è¨Š</a>ã€é€™æ¨£çš„è³‡æ–™ï¼Œé›–ç„¶å¾ˆå¤šäººæˆ²ç¨±æˆ¿åƒ¹åˆè¦ä¸‹è·Œäº†ï¼Œä½†æ˜¯è€è©±ä¸€å¥ï¼Œèº«ç‚º<del>æœ‰è‰¯å¿ƒçš„é–‹ç™¼è€…ï¼Œç•¶ç„¶å±…ä½å®‰å…¨æ¯”æˆ¿åƒ¹ä»€éº¼çš„é‚„è¦é‡è¦å¾—å¤š</del>ã€‚</p>
<p>é‚£éº¼ï¼Œæ‹¿åˆ°é€™ä»½è³‡æ–™æˆ‘å€‘å¯ä»¥æ€éº¼ç©å‘¢?
å‰›å¥½é€™ä»½è³‡æ–™çš„æ ¼å¼æ˜¯ CSV (Comma-Separated Valuesï¼Œä¸€ç¨®ç”±é€—é»åˆ†éš”çš„ç´”æ–‡å­—è³‡æ–™æ ¼å¼)ï¼Œæ‰€ä»¥æœ¬ç¯‡å°±ä¾†ä»‹ç´¹å¦‚ä½•é€é <a href="https://support.google.com/fusiontables/answer/2571232" target="_blank" rel="external">Google Fusion Table</a> ä¾†è®“æˆ‘å€‘ä¸å¿…å¯«ä»»ä½•çš„ code ï¼Œä¹Ÿå¯ä»¥å»ºç«‹ä¸»é¡Œåœ°åœ–ã€‚</p>
<p>é¦–å…ˆå…ˆåˆ°<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=68785231-d6c5-47a1-b001-77eec70bec02" target="_blank" rel="external">å°åŒ—å¸‚ä½å®…ç«Šç›œé»ä½è³‡è¨Š</a>ï¼Œé»ä¸€ä¸‹ã€Œä½¿ç”¨è³‡æ–™ã€å°‡æ‰€éœ€çš„æª”æ¡ˆä¸‹è¼‰ä¸‹ä¾†ï¼Œæœƒå¾—åˆ°ä¸€ä»½ csv æª”æ¡ˆã€‚</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/UsvTpRmSDWhtT8junGNw_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.16.22.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.16.22.png"></p>
<p>æ¥è‘—æ‰“é–‹ <a href="https://support.google.com/fusiontables/answer/2571232" target="_blank" rel="external">Google Fusion Table</a> çš„é é¢ï¼Œçœ‹åˆ°ä¸‹é¢é€™å€‹ç•«é¢ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/vFIqF2IuSOuhKhR0mKUt_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.33.31.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.33.31.png"></p>
<p>æ¥è‘—é¸æ“‡ã€ŒCREATE A FUSION TABLEã€ï¼Œæœƒçœ‹åˆ°é€™æ¨£çš„ç•«é¢ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/QrsLmP03QNamaW0qrqjT_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.37.48.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.37.48.png"></p>
<p>ç¾åœ¨è©¦è‘—æŠŠå‰›å‰›çš„ csv ç›´æ¥é¤µçµ¦ä»–ï¼Œçœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼äº‹
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/Wf4cjXTQTrCXlw0UDWMl_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.05.47.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.05.47.png"></p>
<p>å¦‚æœä¸æ„å¤–ï¼Œä½ æ‡‰è©²æœƒå¾—åˆ°åƒé€™æ¨£çš„äº‚ç¢¼è³‡æ–™ XDDDDD
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/AUqRTPyFQX29z5TdLGaM_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.06.19.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.06.19.png"></p>
<p>ä¸éæ²’é—œä¿‚ï¼Œå±±ä¸è½‰è·¯è½‰ï¼Œæª”æ¡ˆæ ¼å¼ç•¶ç„¶ä¹Ÿå¯ä»¥è½‰ã€‚åªæ˜¯éœ€è¦å¤šèµ°å¹¾æ­¥è·¯ã€‚
é€™æ¬¡æˆ‘å€‘å°‡åŸå§‹çš„ csv è³‡æ–™å…ˆä¸Ÿåˆ° <a href="http://www.google.com/intl/zh-TW_tw/sheets/about/" target="_blank" rel="external">Google Sheet</a> å…§ï¼Œè«‹ä»–å°‡æˆ‘å€‘çš„è³‡æ–™è½‰æˆæ­£ç¢ºçš„ç·¨ç¢¼ã€‚ åœ¨å»ºç«‹ä¸€å€‹æ–°çš„ Google Sheet ä¹‹å¾Œï¼Œæˆ‘å€‘é¸æ“‡ File &gt; Import å°‡å‰›å‰›çš„ csv æª”æ¡ˆåŒ¯å…¥ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/fNpq4j4rTEuynwQAcxOO_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.07.40.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.07.40.png"></p>
<p>è¨˜å¾—ä¸€æ¨£è¦é¸æ“‡ Commaï¼Œå› ç‚ºæ˜¯é€éé€—é»åˆ†éš”çš„è³‡æ–™æ ¼å¼ã€‚
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/bbUWtz7RXqdpZsizK5Lw_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.08.07.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.08.07.png"></p>
<p>ç„¶å¾Œå°±æœƒå¾—åˆ°æ­£ç¢ºç·¨ç¢¼å¾Œçš„è³‡æ–™å›‰ã€‚<del>ä¸éç³–å»é‡Œä¸€æ¨£ GG...å› ç‚ºåŸå§‹è³‡æ–™å°± GG äº†... orz</del>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/wYMPpnlHTRmrgoywrKGc_%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt="æœªå‘½å.png"></p>
<p>ok, åˆ°äº†é€™è£¡æˆ‘å€‘å·²ç¶“æœ‰ä¸€ä»½æ­£ç¢ºçš„è³‡æ–™ï¼Œé€™æ™‚å†å›åˆ° Funsion Tableï¼Œæˆ‘å€‘é¸æ“‡ ã€ŒGoogle Spreadsheetsã€ï¼Œç„¶å¾Œå°‡å‰›å‰›å»ºç«‹çš„ Google Sheet åŒ¯å…¥é€²ä¾†:
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/QrsLmP03QNamaW0qrqjT_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.37.48.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.37.48.png"></p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/66zfnteRQy6L50MJQUZ1_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.11.18.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.11.18.png"></p>
<p>åŒ¯å…¥æˆåŠŸå¾Œï¼ŒFunsion Table æœƒå‡ºç¾é€™æ¨£çš„ç•«é¢ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/pDQ7qI4WSDub29jPiglU_%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt="æœªå‘½å.png"></p>
<p>é€™å€‹æ™‚å€™ï¼Œå› ç‚ºæˆ‘å€‘è¦è£½ä½œåœ°åœ–ï¼Œæ‰€ä»¥è¦å‘Šè¨´ Funsion Table åœ°é»çš„æ¬„ä½ä¸æ˜¯å–®ç´”çš„å­—ä¸²ï¼Œè€Œæ˜¯ç”¨ä¾†è¡¨ç¤ºåœ°ç†è³‡è¨Šçš„è³‡æ–™ã€‚é»é¸ Edit &gt; Change columnsï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/thibCn9zRMO435hQgjFd_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.11.57.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.11.57.png"></p>
<p>ç„¶å¾Œå°‡ç™¼ç”Ÿåœ°é»çš„ Type æ”¹æˆ Locationï¼Œç„¶å¾Œé»ä¸Šé¢è—è‰²çš„ Save å„²å­˜ã€‚
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/TK4RPNQtQNiXcQBclDeu_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.12.09.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.12.09.png"></p>
<p>è³‡æ–™éƒ½æº–å‚™å¥½äº†ï¼Œç„¶å¾Œæˆ‘å€‘å»ºç«‹åœ°åœ–ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/csg65yBiQIyKcj1PAnNk_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.58.53.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.58.53.png"></p>
<p>ä¸æ„å¤–çš„è©±ä½ æ‡‰è©²æœƒçœ‹åˆ°é€™æ¨£çš„ç•«é¢ï¼Œæ˜¯å› ç‚ºæˆ‘å€‘å‚³å…¥çš„æ˜¯åœ°å€çš„æ–‡å­—è³‡è¨Šï¼Œ Google éœ€è¦å°‡å®ƒè½‰ç‚ºç¶“ç·¯åº¦å¾Œæ‰èƒ½å°æ‡‰åˆ°åœ°åœ–ä¸Šï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/JJNbZ5DRRmehqBdoDytm_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.13.03.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.13.03.png"></p>
<p>ç„¶å¾Œç­‰å¾…ä¸€æ®µæ™‚é–“å¾Œï¼ŒFunsion Table å°±æœƒç‚ºæˆ‘å€‘ç”¢ç”Ÿåœ°åœ–ï¼Œåƒé€™æ¨£ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/7cjQA7USzGy7nGrQRLDr_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8810.20.02.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ10.20.02.png"></p>
<p>é™¤äº†åœ°é»æ¨™ç¤ºå¤–ï¼Œä»–ä¹Ÿæä¾›äº†ç†±åœ– (Heat Map) çš„å‘ˆç¾ï¼Œè©¦è‘—æ‹‰æ‹‰æ—é‚Šçš„æ²è»¸èª¿æ•´åƒæ•¸å§ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/304787/wMQb7zI8R72jFxu7a3g4_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-10-15%20%E4%B8%8A%E5%8D%8811.03.53.png" alt="è¢å¹•å¿«ç…§ 2015-10-15 ä¸Šåˆ11.03.53.png"></p>
<p>ç•¶ç„¶ä½ ä¹Ÿå¯ä»¥åšå¥½çš„åœ°åœ– share å‡ºä¾†ï¼Œåƒé€™æ¨£ï¼š</p>
<iframe width="800" height="400" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?q=select+col3+from+1sAGtul5gWv1_yRpPTYI1ZvPaHQRPDod-B0MbOeS_&amp;viz=MAP&amp;h=false&amp;lat=25.05814459656792&amp;lng=121.63429174086912&amp;t=1&amp;z=12&amp;l=col3&amp;y=3&amp;tmplt=4&amp;hml=GEOCODABLE"></iframe>

<p>é€é Fusion Table æˆ‘å€‘å¯ä»¥ä¸ç”¨å¯«ä»»ä½•çš„ç¨‹å¼ç¢¼å°±ç”Ÿæˆä¸€ä»½è³‡è¨Šåœ°åœ–ï¼Œå¾ˆç°¡å–®å§ :)</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[åˆ©ç”¨ Google Map æª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–]]></title>
      <url>http://kuro.tw/posts/2015/09/30/use-google-map-view-rainfall-simulation-of-flooding-in-taipei-city-map/</url>
      <content type="html"><![CDATA[<p>çœ‹åˆ°å‰å…©å¤©çš„æ–°è: <a href="https://tw.news.yahoo.com/%E6%9F%AF%E6%96%87%E5%93%B2%E6%83%B3%E5%85%AC%E9%96%8B%E6%98%93%E6%B7%B9%E6%B0%B4%E5%9C%B0%E5%8D%80-%E5%8C%97%E5%B8%82%E5%BA%9C%E5%B7%B2%E4%B8%8A%E7%B6%B2-115016390.html" title="æŸ¯æ–‡å“²æƒ³å…¬é–‹æ˜“æ·¹æ°´åœ°å€ åŒ—å¸‚åºœå·²ä¸Šç¶²" target="_blank" rel="external">æŸ¯æ–‡å“²æƒ³å…¬é–‹æ˜“æ·¹æ°´åœ°å€ åŒ—å¸‚åºœå·²ä¸Šç¶²</a>ï¼Œåˆå‰›å¥½æœ‰å‰è¼©å¯«äº†ä¸€ç¯‡ <a href="http://gis.rchss.sinica.edu.tw/qgis/?p=3221" title="åˆ©ç”¨QGISæª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–" target="_blank" rel="external">åˆ©ç”¨QGISæª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–</a>ï¼Œ<del>é›–ç„¶èº«è™•æˆ¿ä»²æ¥­ï¼Œä½†èº«ç‚ºæœ‰è‰¯å¿ƒçš„é–‹ç™¼è€…ä¸èƒ½åªæƒ³è‘—æˆ¿åƒ¹</del>ï¼Œå¿ƒæƒ³æ‡‰ä¹Ÿå¯é€é Google Map ä¾†å‘ˆç¾ï¼Œæ–¼æ˜¯è©¦äº†ä¸€ä¸‹ï¼Œé †ä¾¿å¯«ç¯‡è¨˜éŒ„ã€‚</p>
<p>é¦–å…ˆå¾<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=fa1e8012-ebb4-473b-888e-97f9a9ce365e" title="è‡ºåŒ—å¸‚æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å°" target="_blank" rel="external">è‡ºåŒ—å¸‚æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å°</a>å°‡æ‰€éœ€çš„è³‡æ–™ä¸€ä¸€ä¸‹è¼‰ä¸‹ä¾†ï¼Œæ ¼å¼æ˜¯ kmz (å…¶å¯¦å°±æ˜¯ zip å£“ç¸®)ã€‚åœ¨è§£å£“ç¸®å¾Œå¯ä»¥å¾—åˆ° doc.kml æª”æ¡ˆã€‚ æ¥è‘—ï¼Œé›–ç„¶ Google maps API æœ‰æä¾› <a href="https://developers.google.com/maps/documentation/javascript/examples/layer-kml" title="Google maps API KML Layers" target="_blank" rel="external">KML Layers</a> çš„åœ–å±¤åµŒå¥—ï¼Œä½†è½‰å‡ºä¾†çš„ kml æª”ä¼¼ä¹è¦ç¨ä½œä¿®æ”¹å¾Œæ‰èƒ½é€é KML Layers å¥—ç”¨åœ¨ Google map ä¸Šï¼Œé€™è£æˆ‘é¸æ“‡å¦ä¸€ç¨®åšæ³•: å°‡ kml è½‰ç‚º geoJSON å¾Œä½¿ç”¨ã€‚</p>
<p>å‰é¢èªªåˆ°è¦å°‡ kml æª”æ¡ˆè½‰ç‚º geoJSONï¼Œé‚£éº¼è©²å¦‚ä½•è½‰æ›æ ¼å¼å‘¢ï¼Ÿ
å¹¸å¥½ mapbox æä¾›äº† <a href="https://github.com/mapbox/togeojson" target="_blank" rel="external">togeojson</a> é€™å¥—å·¥å…·ï¼Œé€éå®ƒæä¾›çš„ <code>toGeoJSON.kml(doc)</code> å°±å¯ä»¥è¼•é¬†åœ°å°‡å®ƒè½‰ç‚º geoJSON çš„æ ¼å¼äº†ã€‚</p>
<p>æœ‰é—œ GeoJSON å¦‚ä½•è¼¸å‡ºè‡³ Google Map å¯ä»¥åƒè€ƒå°å¼Ÿä¹‹å‰çš„ postï¼š<a href="http://kuro.tw/posts/2015/04/28/through-the-google-maps-api-geojson-data">é€é Google Maps API è™•ç† GeoJSON è³‡æ–™</a>ï¼Œé€™è£å°±ä¸å†è´…è¿°ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé€é Google Maps Javascript API è¼¸å‡ºçš„ GeoJSON é è¨­çš„æ¨£å¼éƒ½æ˜¯é»‘è‰²ç²—ç·šï¼Œæƒ³è¦ä¿®æ”¹æ¨£å¼çš„è©±å¯ä»¥é€é <code>setStyle</code> ä¾†åšè™•ç†ï¼Œåƒé€™æ¨£å¯ä»¥é‡å° name æ˜¯ 0.3 çš„æ™‚å€™ï¼Œæˆ‘å€‘è¼¸å‡ºæ¨£å¼ç‚ºè—è‰²çš„ç·šï¼Œå¦‚æœæ˜¯ 0.3~1.0 çš„è©±ï¼Œå‰‡æ˜¯è¼¸å‡ºç‚ºç¶ è‰²çš„ç·šæ®µï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥é‡å°å¡«è‰²èˆ‡é€æ˜åº¦ç­‰ç­‰åšè¨­å®šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">dataMap.setStyle(function(feature)&#123;</div><div class="line">  if( feature.getProperty(&apos;name&apos;) === &apos;0.3&apos;)&#123;</div><div class="line">    return &#123; fillOpacity: 0.35, fillColor: &apos;#0070FF&apos;, strokeWeight: 2, strokeColor: &apos;#0070FF&apos;, strokeOpacity: 1 &#125;;</div><div class="line">  &#125;</div><div class="line">  if( feature.getProperty(&apos;name&apos;) === &apos;0.3~1.0&apos;)&#123;</div><div class="line">    return &#123; fillOpacity: 0.35, fillColor: &apos;#54FF00&apos;, strokeWeight: 2, strokeColor: &apos;#54FF00&apos;, strokeOpacity: 1 &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>çµæœå‘ˆç¾åƒé€™æ¨£ï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/302535/lNUGoyd7RB2MOsx8i1cw_image.png" alt="image.png"></p>
<p>é€™è£ä¹Ÿæœ‰ Online Demo: <a href="http://kurotanshi.github.io/TPEDisasterSummary/rain/rain_tp_map.html" target="_blank" rel="external">http://kurotanshi.github.io/TPEDisasterSummary/rain/rain_tp_map.html</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[ç­†è¨˜] JavaScript è®Šæ•¸å®£å‘Šèˆ‡ä½œç”¨åŸŸ]]></title>
      <url>http://kuro.tw/posts/2015/07/08/note-javascript-variables-declared-with-the-scope-scope/</url>
      <content type="html"><![CDATA[<p>å¤§å®¶éƒ½çŸ¥é“ï¼ŒJavaScript çš„è®Šæ•¸æœ‰å…¶ä½œç”¨åŸŸçš„ç¯„åœï¼Œè‹¥ä½¿ç”¨å‰æœªç¶“ var å®£å‘Šï¼Œå°±æœƒè‡ªå‹•è®Šæˆå…¨åŸŸè®Šæ•¸ (global variable)ï¼Œè€Œåœ¨å…¶ code block å…§å®£å‘Šçš„è®Šæ•¸ä¹Ÿåªæœ‰è©² code block å…§å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>é€™æ¬¡çš„å•é¡Œï¼Œå…¶å¯¦å¾ˆä¹…ä»¥å‰åœ¨ tonyQ çš„èšæœƒä¸Šå°±è½ä»–èªªéäº†ï¼Œ<del>åªæ˜¯æ²’æƒ³åˆ°é‚„çœŸçš„æœƒé‡åˆ° XDDDD</del></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);		<span class="comment">// 1</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ code å¾ˆç°¡å–®ï¼Œå°±æ˜¯å®£å‘Šä¸€å€‹å…¨åŸŸè®Šæ•¸ aï¼Œç„¶å¾Œå€¼ç‚º 1 ï¼Œå› ç‚ºæ˜¯å…¨åŸŸè®Šæ•¸ï¼Œæ‰€ä»¥åœ¨ä¹‹å¾Œçš„åŒ¿åå‡½å¼å…§å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);		<span class="comment">// 100</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>é€™æ¬¡ï¼Œåœ¨åŒ¿åå‡½å¼å…§ï¼Œæˆ‘å€‘å¦å¤–å®£å‘Šäº†ä¸€å€‹ aï¼Œå€¼ç‚º 100ï¼Œå› ç‚ºå…¶ä½œç”¨åŸŸçš„é—œä¿‚ï¼Œæ‰€ä»¥ console çš„çµæœæœƒæ˜¯ 100ã€‚</p>
<p>æ¥è‘—ï¼Œå•é¡Œä¾†äº†ï¼Œå¦‚æœæˆ‘å€‘åœ¨ <code>var a = 100;</code> ä¹‹å‰å»å–å€¼ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹å‘¢ï¼Ÿ
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">//  ?</span></div><div class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// 100</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>ç­”æ¡ˆæ˜¯ï¼Œç¬¬ä¸€æ¬¡çš„ console.log(a) æœƒå°å‡º <strong>undefined</strong>ï¼Œè€Œç¬¬äºŒæ¬¡æœƒå‡ºç¾ 100ã€‚</p>
<p>å› ç‚ºåœ¨åŒ¿åå‡½æ•¸ç¨ç«‹çš„ scope å…§ï¼Œä¸ç®¡ var æ˜¯æ”¾åœ¨æœ€å‰é¢ï¼Œæˆ–æ˜¯æœ€å¾Œä¸€è¡Œï¼Œä»–çš„è®Šæ•¸å¯¦é«”åœ¨è©² code block ä¸€é–‹å§‹å°±æ˜¯æ–°çš„äº†ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå‰›å‰›çš„ code å…¶å¯¦ç­‰åŒä¸‹é¢é€™æ®µï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> a;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// undefined</span></div><div class="line">  a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// 100</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ç¬¬ä¸€æ¬¡æœƒå°å‡º undefined ã€‚</p>
<p>è¦æ€éº¼æ’é™¤é€™æ¨£çš„å•é¡Œå‘¢ï¼Œå¾ˆç°¡å–®ï¼Œè¦å˜›ä¸€é–‹å§‹å°±ä¸è¦å–ç›¸åŒåç¨±ï¼Œè¦å˜›å°±é€éåƒæ•¸çš„æ–¹å¼ä»£å…¥åŸæœ¬çš„è®Šæ•¸ï¼Œåƒé€™æ¨£ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">_a</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(_a);    <span class="comment">// 1</span></div><div class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);    <span class="comment">// 100</span></div><div class="line">&#125;)(a);</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Taipei D3.js Meetup å°èšåˆ†äº«å¿ƒå¾—]]></title>
      <url>http://kuro.tw/posts/2015/06/18/taipei-d3js-meetup-gathering-to-share-experiences/</url>
      <content type="html"><![CDATA[<p>é€™æ¬¡æˆ‘åœ¨ <a href="http://www.meetup.com/Taipei-D3-js-Meetup/" title="Taipei D3.js Meetup" target="_blank" rel="external">Taipei D3.js Meetup</a> (ç¾åœ¨ä¼¼ä¹æ”¹å« Visual Thursday) åˆ†äº«çš„ Talk æ˜¯æœ‰é—œæ–¼åœ°ç†è¦–è¦ºåŒ–çš„ç°¡ä»‹ï¼Œé›–ç„¶é¡Œç›®è½èµ·ä¾†å¾ˆå­¸è¡“ï¼Œä½†å…¶å¯¦å…§å®¹æ˜¯æˆ‘é€™é™£å­å°æ–¼ Web GIS ä»¥åŠåœ°åœ–è¦–è¦ºåŒ–çš„ä¸€äº›æ‘¸ç´¢å¿ƒå¾—åˆ†äº«ã€‚</p>
<p>æ„Ÿè¬å°ç£å¾®è»Ÿæä¾›å ´åœ° XD</p>
<p>ä¸‹é¢æ˜¯æˆ‘çš„æŠ•å½±ç‰‡</p>
<iframe src="https://www.slideshare.net/slideshow/embed_code/key/mhzctMFXFoHMJn" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="margin-bottom:1em;"></iframe>


<p>é€™æ¬¡å¹¾å€‹ Demo çš„åŸå§‹ç¢¼éƒ½æ”¾åœ¨ Github ä¸Šï¼š <a href="https://github.com/kurotanshi/VisualThursday_demo" target="_blank" rel="external">https://github.com/kurotanshi/VisualThursday_demo</a>
æœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œä¸‹è¼‰ç ”ç©¶ã€‚</p>
<p>æƒ³çœ‹ Online Demo çš„ä¹Ÿå¯ä»¥ç›´æ¥åˆ°é€™ï¼š <a href="http://kurotanshi.github.io/VisualThursday_demo/" target="_blank" rel="external">http://kurotanshi.github.io/VisualThursday_demo/</a></p>
<p>é›–ç„¶éƒ½æ˜¯ä»¥ Google Map ç‚ºç¯„ä¾‹ï¼Œä½†æ˜¯å¤§éƒ¨ä»½çš„åœ–è³‡ç³»çµ±å¦‚ leaflet.js / MapBox ç­‰éƒ½æ˜¯é€šç”¨çš„ï¼Œå°¤å…¶æ˜¯ <a href="http://turfjs.org/" title="http://turfjs.org/" target="_blank" rel="external">Turf.js</a> é€™å€‹åœ°ç†è³‡è¨Šåˆ†æçš„å·¥å…·ï¼Œååˆ†å¼·å¤§ï¼Œå¯ä»¥ç›´æ¥é‡å° geojson åšé‹ç®—ï¼Œä¹Ÿå¯ä»¥é€é node åœ¨å¾Œç«¯åŸ·è¡Œé‹ç®—ã€‚è‡³ä»Šæˆ‘é‚„åœ¨æ‘¸ç´¢å®ƒçš„åŠŸèƒ½ï¼Œä¹Ÿè¨±æœªä¾†æ›´åŠ ç†Ÿç·´å¾Œå¯ä»¥å†ä¾†åˆ†äº«çµ¦å¤§å®¶ã€‚</p>
<p>è¬è¬æ‰€æœ‰åœ¨ç«¯åˆé€£å‡å‰ä»é¡˜æ„ä¾†åƒèˆ‡æ´»å‹•çš„æœ‹å‹ï¼Œå¤§å®¶ç«¯åˆç¯€å¿«æ¨‚ :)</p>
<p>æœ€å¾Œï¼Œæˆ‘å€‘é‚„æœ‰å¾ˆå¤šå°ˆæ¡ˆæƒ³å¯¦ç¾ï¼Œæ­¡è¿æœ‰å¿—ä¹‹å£«åŠ å…¥ï¼</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[JS] [Note] TWD97 æ¨™è½‰æ›çˆ² ç¶“ç·¯åº¦ ]]></title>
      <url>http://kuro.tw/posts/2015/06/11/js-note-twd97-convert-to-longitude-and-latitude/</url>
      <content type="html"><![CDATA[<p>å› ç‚ºå¾è‡ºåŒ—å¸‚æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å° API æ‹¿åˆ°çš„è³‡æ–™æ˜¯ TWD97 åº§æ¨™æ ¼å¼ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆè¦å°‡å®ƒè½‰æˆç¶“ç·¯åº¦å¾Œæ‰èƒ½å¥—ç”¨è‡³ Google Map ä½¿ç”¨ã€‚ç¶²è·¯ä¸ŠæŸ¥äº†å¾ˆå¤šè³‡æ–™ï¼Œæœ€å¾Œæ‰¾åˆ°æœ€è¦ªæ°‘çš„æ˜¯ç±³èŸ²å¤§çš„ PHP ç‰ˆæœ¬ï¼Œæ–¼æ˜¯å°±æ”¹æˆå¯«æˆ‘æœ€ç†Ÿæ‚‰çš„ JSã€‚</p>
<p>reference:
<a href="http://blog.xuite.net/vexed/tech/53749528-TWD97+%E5%BA%A7%E6%A8%99%E8%BD%89%E7%B6%93%E7%B7%AF%E5%BA%A6" target="_blank" rel="external">Vexed&#39;s Blog - TWD97 åº§æ¨™è½‰ç¶“ç·¯åº¦</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">twd97_to_latlng</span>(<span class="params">$x, $y</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> pow = <span class="built_in">Math</span>.pow, M_PI = <span class="built_in">Math</span>.PI;</div><div class="line">  <span class="keyword">var</span> sin = <span class="built_in">Math</span>.sin, cos = <span class="built_in">Math</span>.cos, tan = <span class="built_in">Math</span>.tan;</div><div class="line">  <span class="keyword">var</span> $a = <span class="number">6378137.0</span>, $b = <span class="number">6356752.314245</span>;</div><div class="line">  <span class="keyword">var</span> $lng0 = <span class="number">121</span> * M_PI / <span class="number">180</span>, $k0 = <span class="number">0.9999</span>, $dx = <span class="number">250000</span>, $dy = <span class="number">0</span>;</div><div class="line">  <span class="keyword">var</span> $e = pow((<span class="number">1</span> - pow($b, <span class="number">2</span>) / pow($a, <span class="number">2</span>)), <span class="number">0.5</span>);</div><div class="line"></div><div class="line">  $x -= $dx;</div><div class="line">  $y -= $dy;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $M = $y / $k0;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $mu = $M / ($a * (<span class="number">1.0</span> - pow($e, <span class="number">2</span>) / <span class="number">4.0</span> - <span class="number">3</span> * pow($e, <span class="number">4</span>) / <span class="number">64.0</span> - <span class="number">5</span> * pow($e, <span class="number">6</span>) / <span class="number">256.0</span>));</div><div class="line">  <span class="keyword">var</span> $e1 = (<span class="number">1.0</span> - pow((<span class="number">1.0</span> - pow($e, <span class="number">2</span>)), <span class="number">0.5</span>)) / (<span class="number">1.0</span> + pow((<span class="number">1.0</span> - pow($e, <span class="number">2</span>)), <span class="number">0.5</span>));</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $J1 = (<span class="number">3</span> * $e1 / <span class="number">2</span> - <span class="number">27</span> * pow($e1, <span class="number">3</span>) / <span class="number">32.0</span>);</div><div class="line">  <span class="keyword">var</span> $J2 = (<span class="number">21</span> * pow($e1, <span class="number">2</span>) / <span class="number">16</span> - <span class="number">55</span> * pow($e1, <span class="number">4</span>) / <span class="number">32.0</span>);</div><div class="line">  <span class="keyword">var</span> $J3 = (<span class="number">151</span> * pow($e1, <span class="number">3</span>) / <span class="number">96.0</span>);</div><div class="line">  <span class="keyword">var</span> $J4 = (<span class="number">1097</span> * pow($e1, <span class="number">4</span>) / <span class="number">512.0</span>);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $fp = $mu + $J1 * sin(<span class="number">2</span> * $mu) + $J2 * sin(<span class="number">4</span> * $mu) + $J3 * sin(<span class="number">6</span> * $mu) + $J4 * sin(<span class="number">8</span> * $mu);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $e2 = pow(($e * $a / $b), <span class="number">2</span>);</div><div class="line">  <span class="keyword">var</span> $C1 = pow($e2 * cos($fp), <span class="number">2</span>);</div><div class="line">  <span class="keyword">var</span> $T1 = pow(tan($fp), <span class="number">2</span>);</div><div class="line">  <span class="keyword">var</span> $R1 = $a * (<span class="number">1</span> - pow($e, <span class="number">2</span>)) / pow((<span class="number">1</span> - pow($e, <span class="number">2</span>) * pow(sin($fp), <span class="number">2</span>)), (<span class="number">3.0</span> / <span class="number">2.0</span>));</div><div class="line">  <span class="keyword">var</span> $N1 = $a / pow((<span class="number">1</span> - pow($e, <span class="number">2</span>) * pow(sin($fp), <span class="number">2</span>)), <span class="number">0.5</span>);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $D = $x / ($N1 * $k0);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $Q1 = $N1 * tan($fp) / $R1;</div><div class="line">  <span class="keyword">var</span> $Q2 = (pow($D, <span class="number">2</span>) / <span class="number">2.0</span>);</div><div class="line">  <span class="keyword">var</span> $Q3 = (<span class="number">5</span> + <span class="number">3</span> * $T1 + <span class="number">10</span> * $C1 - <span class="number">4</span> * pow($C1, <span class="number">2</span>) - <span class="number">9</span> * $e2) * pow($D, <span class="number">4</span>) / <span class="number">24.0</span>;</div><div class="line">  <span class="keyword">var</span> $Q4 = (<span class="number">61</span> + <span class="number">90</span> * $T1 + <span class="number">298</span> * $C1 + <span class="number">45</span> * pow($T1, <span class="number">2</span>) - <span class="number">3</span> * pow($C1, <span class="number">2</span>) - <span class="number">252</span> * $e2) * pow($D, <span class="number">6</span>) / <span class="number">720.0</span>;</div><div class="line">  <span class="keyword">var</span> $lat = $fp - $Q1 * ($Q2 - $Q3 + $Q4);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> $Q5 = $D;</div><div class="line">  <span class="keyword">var</span> $Q6 = (<span class="number">1</span> + <span class="number">2</span> * $T1 + $C1) * pow($D, <span class="number">3</span>) / <span class="number">6</span>;</div><div class="line">  <span class="keyword">var</span> $Q7 = (<span class="number">5</span> - <span class="number">2</span> * $C1 + <span class="number">28</span> * $T1 - <span class="number">3</span> * pow($C1, <span class="number">2</span>) + <span class="number">8</span> * $e2 + <span class="number">24</span> * pow($T1, <span class="number">2</span>)) * pow($D, <span class="number">5</span>) / <span class="number">120.0</span>;</div><div class="line">  <span class="keyword">var</span> $lng = $lng0 + ($Q5 - $Q6 + $Q7) / cos($fp);</div><div class="line"></div><div class="line">  $lat = ($lat * <span class="number">180</span>) / M_PI;</div><div class="line">  $lng = ($lng * <span class="number">180</span>) / M_PI;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">lat</span>: $lat,</div><div class="line">    <span class="attr">lng</span>: $lng</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ - 2]]></title>
      <url>http://kuro.tw/posts/2015/05/20/added-to-the-google-map-images-d3-2/</url>
      <content type="html"><![CDATA[<p><a href="http://kuro.tw/posts/2015/05/20/join-the-d3-in-google-map-image" title="åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ ">ä¸Šä¸€ç¯‡</a>æåˆ°äº†å¦‚ä½•åœ¨ Google Map è£¡é¢åŠ å…¥ D3 çš„åœ–åƒï¼Œé€™æ¬¡æˆ‘å€‘å¯¦éš›å°‡è³‡æ–™å¥—é€²å»å§ã€‚</p>
<p>è³‡æ–™ä¾†æºæ˜¯ä¸Šç¯‡æåˆ°çš„<a href="http://data.taipei/opendata/datalist/datasetMeta?oid=1d71c478-205f-42c5-8386-35f86d74fdd1" target="_blank" rel="external">è‡ºåŒ—æ·é‹å„ç«™é€²å‡ºé‡çµ±è¨ˆ</a>çš„çµ±è¨ˆè³‡æ–™ï¼Œå› ç‚ºå°åŒ—å¸‚æ”¿åºœé–‹æ”¾å¹³å°ä¸¦æ²’æœ‰æä¾› CORS (è·¨ä¾†æºè³‡æºå…±äº«)çš„æœå‹™ï¼Œæ²’é—œä¿‚ï¼Œæˆ‘å€‘ç›´æ¥å°‡è³‡æ–™ä¸‹è¼‰å­˜æˆ json æª”æ¡ˆå³å¯ã€‚ (ç¯„ä¾‹ç‚º 2015/4 é€²å‡ºç«™äººæ•¸)</p>
<p>æŒ‰ç…§æ…£ä¾‹ï¼Œå…ˆçœ‹çµæœ - Demo: <a href="http://jsbin.com/wexiva/3/" target="_blank" rel="external">http://jsbin.com/wexiva/3/</a>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/276658/4DhTbWRwSvujvsxZC2Z5_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-05-20%20%E4%B8%8B%E5%8D%8811.54.46.png" alt="è¢å¹•å¿«ç…§ 2015-05-20 ä¸‹åˆ11.54.46.png"></p>
<p>è—è‰²çš„æ˜¯é€²ç«™äººæ•¸ï¼Œæ©˜è‰²çš„æ˜¯å‡ºç«™äººæ•¸ã€‚å¯ä»¥çœ‹å‡ºå„ç«™åœ¨ 4/1 çš„é€²å‡ºç«™äººæ•¸ç›¸ç•¶å¹³å‡ã€‚</p>
<p>å› ç‚ºé€™æ¬¡æŠ“å–çš„è³‡æ–™æ¯”è¼ƒå¤šï¼Œæ‰€ä»¥ç¨‹å¼ä¹Ÿç¨å¾®è¤‡é›œä¸€é»ï¼Œä¸éæ²’é—œä¿‚ï¼Œæ¦‚å¿µé‚„æ˜¯å¾ˆç°¡å–®çš„ã€‚
ä¸å›‰å”†ç›´æ¥çœ‹ code.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map;</div><div class="line"><span class="keyword">var</span> overlay = <span class="keyword">new</span> google.maps.OverlayView();</div><div class="line"><span class="keyword">var</span> sta_in = [], sta_out = [], mrtData;</div><div class="line"></div><div class="line"><span class="comment">// è®€å–è³‡æ–™, sta_in = 2015 å¹´å››æœˆé€²ç«™äººæ•¸, sta_out = 2015 å¹´å››æœˆå‡ºç«™äººæ•¸.</span></div><div class="line"><span class="comment">// è³‡æ–™ä¾†æº: http://data.taipei/opendata/datalist/datasetMeta?oid=1d71c478-205f-42c5-8386-35f86d74fdd1</span></div><div class="line">d3.csv(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt.csv"</span>,</div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">  mrtData = data;</div><div class="line"></div><div class="line">  <span class="comment">// é€²ç«™</span></div><div class="line">  d3.json(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt-in-april.json"</span>,</div><div class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error, json</span>) </span>&#123;</div><div class="line">    sta_in = json.result.results;</div><div class="line">    <span class="keyword">if</span>( sta_in.length &gt; <span class="number">0</span> &amp;&amp; sta_out.length &gt; <span class="number">0</span> ) &#123; drawMap(); &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="comment">// å‡ºç«™</span></div><div class="line">  d3.json(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt-out-april.json"</span>,</div><div class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error, json</span>) </span>&#123;</div><div class="line">    sta_out = json.result.results;</div><div class="line">    <span class="keyword">if</span>( sta_in.length &gt; <span class="number">0</span> &amp;&amp; sta_out.length &gt; <span class="number">0</span> ) &#123; drawMap(); &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawMap</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// è¨­å®šåœ“é¤…åœ–é•·å¯¬, åŠå¾‘</span></div><div class="line">    <span class="keyword">var</span> width = <span class="number">35</span>, height = <span class="number">40</span>, radius = <span class="built_in">Math</span>.min(width, height) / <span class="number">2</span>;</div><div class="line"></div><div class="line">    <span class="comment">// é€é d3.scale.category10() ç”Ÿæˆé¡è‰²</span></div><div class="line">    <span class="keyword">var</span> color = d3.scale.category10();</div><div class="line"></div><div class="line">truetrue<span class="comment">// d3.layout.pie()</span></div><div class="line">truetrue<span class="keyword">var</span> pie = d3.layout.pie();</div><div class="line"></div><div class="line">    <span class="comment">// è¨­å®šåœ“é¤…å…§å¤–å±¤åŠå¾‘, é€™è£å…§å±¤è¨­ 0.</span></div><div class="line">    <span class="keyword">var</span> arc = d3.svg.arc()</div><div class="line">        .innerRadius(<span class="number">0</span>)</div><div class="line">        .outerRadius(radius);</div><div class="line"></div><div class="line">    overlay.onAdd = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> layer = d3.select(<span class="keyword">this</span>.getPanes().overlayLayer).append(<span class="string">"div"</span>)</div><div class="line">            .attr(<span class="string">"class"</span>, <span class="string">"stations"</span>);</div><div class="line"></div><div class="line">        overlay.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> projection = <span class="keyword">this</span>.getProjection(),</div><div class="line">                padding = <span class="number">16</span>;</div><div class="line"></div><div class="line">            <span class="comment">// é‡å°æ¯ä¸€ç­†æ·é‹ç«™å¢åŠ  marker</span></div><div class="line">            <span class="keyword">var</span> marker = layer.selectAll(<span class="string">"svg"</span>)</div><div class="line">                .data(d3.entries(mrtData))</div><div class="line">                .each(transform)</div><div class="line">                .enter().append(<span class="string">"svg"</span>)</div><div class="line">                .each(transform)</div><div class="line">                .attr(&#123;</div><div class="line">                    <span class="string">'class'</span>: <span class="string">"marker"</span>,</div><div class="line">                    <span class="string">"width"</span>: width,</div><div class="line">                    <span class="string">"height"</span>: height,</div><div class="line">                    <span class="string">"transform"</span>: <span class="string">"translate("</span> + width / <span class="number">2</span> + <span class="string">","</span> + height / <span class="number">2</span> + <span class="string">")"</span>,</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">            <span class="comment">// å°‡å–å¾—çš„é€²å‡ºç«™è³‡æ–™é€é .data( pie([ é€²ç«™äººæ•¸, å‡ºç«™äººæ•¸ ]) ) æŒ‡å®šåˆ°åœ“é¤…åœ–ä¸­ã€‚</span></div><div class="line">            <span class="comment">// sta_in[0] ä»£è¡¨ 4/1 é€²ç«™äººæ•¸, sta_out[0] ä»£è¡¨ 4/1 å‡ºç«™äººæ•¸.</span></div><div class="line">            <span class="keyword">var</span> g = marker.selectAll(<span class="string">"g"</span>)</div><div class="line">                .data(<span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> pie([<span class="built_in">parseInt</span>(sta_in[<span class="number">0</span>][d.value.name].replace(<span class="string">','</span>, <span class="string">''</span>), <span class="number">10</span>), <span class="built_in">parseInt</span>(sta_out[<span class="number">0</span>][d.value.name].replace(<span class="string">','</span>, <span class="string">''</span>), <span class="number">10</span>)]);</div><div class="line">                &#125;)</div><div class="line">                .enter()</div><div class="line">                .append(<span class="string">"g"</span>);</div><div class="line"></div><div class="line">            <span class="comment">// è‘—è‰²</span></div><div class="line">            g.append(<span class="string">"path"</span>)</div><div class="line">                .attr(&#123;</div><div class="line">                  <span class="string">"fill"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>) </span>&#123; <span class="keyword">return</span> color(i); &#125;,</div><div class="line">                  <span class="string">"d"</span>, arc,</div><div class="line">                  <span class="string">"transform"</span>: <span class="string">"translate("</span> + width / <span class="number">2</span> + <span class="string">","</span> + height / <span class="number">2</span> + <span class="string">")"</span></div><div class="line">                &#125;);</div><div class="line"></div><div class="line">            <span class="comment">// åŠ å…¥æ¨™ç±¤</span></div><div class="line">            marker.append(<span class="string">"text"</span>)</div><div class="line">                .attr(<span class="string">"x"</span>, padding + <span class="number">7</span>)</div><div class="line">                .attr(<span class="string">"y"</span>, padding)</div><div class="line">                .attr(<span class="string">"dy"</span>, <span class="string">".31em"</span>)</div><div class="line">                .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> d.value.name;</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">                d = <span class="keyword">new</span> google.maps.LatLng(d.value.lat, d.value.lng);</div><div class="line">                d = projection.fromLatLngToDivPixel(d);</div><div class="line">                <span class="keyword">return</span> d3.select(<span class="keyword">this</span>)</div><div class="line">                    .style(<span class="string">"left"</span>, (d.x - padding) + <span class="string">"px"</span>)</div><div class="line">                    .style(<span class="string">"top"</span>, (d.y - padding) + <span class="string">"px"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">    &#125;;</div><div class="line">    overlay.setMap(map);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨"><a href="#æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨" class="headerlink" title="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:"></a>æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:</h4><ul>
<li><a href="http://kuro.tw/posts/2015/05/20/join-the-d3-in-google-map-image">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (1)</a></li>
<li><a href="http://kuro.tw/posts/2015/05/20/added-to-the-google-map-images-d3-2">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (2)</a></li>
</ul>
<hr>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ]]></title>
      <url>http://kuro.tw/posts/2015/05/19/join-the-d3-in-google-map-image/</url>
      <content type="html"><![CDATA[<p>å› ç‚ºæ˜¨å¤© <a href="http://data.taipei/" target="_blank" rel="external">å°åŒ—å¸‚æ”¿åºœé–‹æ”¾å¹³å°</a> é–‹å§‹æä¾› <a href="http://data.taipei/opendata/datalist/datasetMeta?oid=1d71c478-205f-42c5-8386-35f86d74fdd1" target="_blank" rel="external">è‡ºåŒ—æ·é‹å„ç«™é€²å‡ºé‡çµ±è¨ˆ</a> çš„çµ±è¨ˆè³‡æ–™ï¼Œæ‰€ä»¥å°±åœ¨æ€è€ƒå¯ä»¥åˆ©ç”¨é€™ä»½è³‡æ–™åšä»€éº¼æ‡‰ç”¨ï¼Œç¬¬ä¸€å€‹æƒ³åˆ°çš„å°±æ˜¯èƒ½å¦é€é D3 èˆ‡åœ°åœ–çš„å…±åŒå‘ˆç¾ï¼Œç•¶ç„¶å°±å¾æˆ‘æœ€ç†Ÿæ‚‰çš„ Google Map é–‹å§‹ã€‚</p>
<p>ä¸éé€™ç¯‡æ–‡ç« åªæœƒä»‹ç´¹åˆ°å¦‚ä½•åœ¨ Google Map åŠ å…¥ D3 (SVG) åœ–åƒã€‚
ç­‰æˆ‘å°‡æ·é‹å„ç«™è³‡è¨ŠåŠ å…¥å¾Œä¹Ÿè¨±æœƒé‚„æœ‰ä¸‹å›ï¼Œå“ˆå“ˆå“ˆã€‚</p>
<p>å…ˆçœ‹çµæœ - Demo: <a href="http://output.jsbin.com/wexiva/1/" target="_blank" rel="external">http://output.jsbin.com/wexiva/1/</a>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/276547/NyZaTlSTDuH8v6DRzWAY_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-05-19%20%E4%B8%8B%E5%8D%8811.34.22.png" alt="è¢å¹•å¿«ç…§ 2015-05-19 ä¸‹åˆ11.34.22.png"></p>
<p>æ•´å€‹ç¨‹å¼éå¸¸ç°¡å–®ï¼Œé¦–å…ˆåœ¨ Google map åŠ å…¥ä¸€å€‹ <code>google.maps.OverlayView()</code>ï¼Œç„¶å¾Œé€é <code>d3.csv</code> è¼‰å…¥è³‡æ–™ã€‚åœ¨ç¹ªè£½ marker (åœ“é») çš„æ™‚å€™ï¼Œé€éè‡ªè¨‚çš„ <code>transform function</code> å»æŒ‡å®šå®ƒçš„åº§æ¨™å°±å®Œæˆäº†ã€‚</p>
<p>ç›¸é—œç¨‹å¼å¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// æ·é‹å„ç«™ç¶“ç·¯åº¦è³‡è¨Š: https://dl.dropboxusercontent.com/u/12537630/mrt.csv</span></div><div class="line"><span class="comment">// è³‡æ–™ä¾†æº: https://github.com/repeat/taipei-metro-stations</span></div><div class="line"></div><div class="line">d3.csv(<span class="string">"https://dl.dropboxusercontent.com/u/12537630/mrt.csv"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> overlay = <span class="keyword">new</span> google.maps.OverlayView();</div><div class="line"></div><div class="line">  <span class="comment">// æ–°å¢ OverlayView åˆ° google map</span></div><div class="line">  overlay.onAdd = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> layer = d3.select(<span class="keyword">this</span>.getPanes().overlayLayer).append(<span class="string">"div"</span>)</div><div class="line">        .attr(<span class="string">"class"</span>, <span class="string">"stations"</span>);</div><div class="line"></div><div class="line">    overlay.draw = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> projection = <span class="keyword">this</span>.getProjection(), padding = <span class="number">16</span>;</div><div class="line"></div><div class="line">      <span class="keyword">var</span> marker = layer.selectAll(<span class="string">"svg"</span>)</div><div class="line">          .data(d3.entries(data))</div><div class="line">          .each(transform)</div><div class="line">          .enter().append(<span class="string">"svg:svg"</span>)</div><div class="line">            .each(transform)</div><div class="line">            .attr(<span class="string">"class"</span>, <span class="string">"marker"</span>);</div><div class="line"></div><div class="line">      <span class="comment">// åŠ å…¥åœ“é»</span></div><div class="line">      marker.append(<span class="string">"svg:circle"</span>)</div><div class="line">          .attr(<span class="string">"r"</span>, <span class="number">6</span>)</div><div class="line">          .attr(<span class="string">"cx"</span>, padding)</div><div class="line">          .attr(<span class="string">"cy"</span>, padding);</div><div class="line"></div><div class="line">      <span class="comment">// åŠ å…¥æ¨™ç±¤</span></div><div class="line">      marker.append(<span class="string">"svg:text"</span>)</div><div class="line">          .attr(<span class="string">"x"</span>, padding + <span class="number">7</span>)</div><div class="line">          .attr(<span class="string">"y"</span>, padding)</div><div class="line">          .attr(<span class="string">"dy"</span>, <span class="string">".31em"</span>)</div><div class="line">          .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d.value.name; &#125;);</div><div class="line"></div><div class="line">      <span class="comment">// transform function. æŒ‡å®šæ¯å€‹é»çš„åº§æ¨™.</span></div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">        d = <span class="keyword">new</span> google.maps.LatLng(d.value.lat, d.value.lng);</div><div class="line">        d = projection.fromLatLngToDivPixel(d);</div><div class="line">        <span class="keyword">return</span> d3.select(<span class="keyword">this</span>)</div><div class="line">            .style(<span class="string">"left"</span>, (d.x - padding) + <span class="string">"px"</span>)</div><div class="line">            .style(<span class="string">"top"</span>, (d.y - padding) + <span class="string">"px"</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="comment">// å°‡ overlay åŠ å…¥åˆ° google åœ°åœ–</span></div><div class="line">  overlay.setMap(map);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ:"></a>åƒè€ƒ:</h4><ul>
<li><a href="http://bl.ocks.org/mbostock/899711" target="_blank" rel="external">http://bl.ocks.org/mbostock/899711</a></li>
<li><a href="https://developers.google.com/maps/documentation/javascript/customoverlays?hl=zh-tw" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/customoverlays?hl=zh-tw</a></li>
</ul>
<hr>
<h4 id="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨"><a href="#æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨" class="headerlink" title="æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:"></a>æœ¬ç³»åˆ—æ–‡ç« åˆ—è¡¨:</h4><ul>
<li><a href="http://kuro.tw/posts/2015/05/20/join-the-d3-in-google-map-image">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (1)</a></li>
<li><a href="http://kuro.tw/posts/2015/05/20/added-to-the-google-map-images-d3-2">åœ¨ Google Map åŠ å…¥ D3 åœ–åƒ (2)</a></li>
</ul>
<hr>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Modern WebConf 2015 èˆ‡æˆ‘çš„è¬›é¡Œï¼šD3 åœ–è¡¨å„ªåŒ–äºŒä¸‰äº‹]]></title>
      <url>http://kuro.tw/posts/2015/05/17/modern-webconf-2015-with-my-theme-d3-optimizing-two-or-three-things/</url>
      <content type="html"><![CDATA[<p>ä¸‹é¢æŠ•å½±ç‰‡æ˜¯é€™æ¬¡å°å¼Ÿåœ¨ Modern WebConf 2015 åˆ†äº«çš„ä¸»é¡Œï¼Œå…§å®¹æ˜¯æœ‰é—œ D3 é–‹ç™¼çš„ä¸€äº›å¿ƒå¾—ã€‚</p>
<p>å…¶å¯¦æ—©å…ˆåœ¨æº–å‚™çš„æ™‚å€™æœ‰äº›å¿å¿‘ï¼Œåƒé€™ç¨®å¤§æ‹œæ‹œçš„æ¼”è¬›å ´åˆï¼Œå¾ˆé›£é æƒ³è½çœ¾çš„ç¨‹åº¦ï¼Œè¬›é¡Œå¤ªæ·±æ“”å¿ƒæœƒçœ¾ç„¡æ³•å¸æ”¶ï¼Œå¤ªæ·ºåˆæ€•å°ä¸èµ·æœƒçœ¾çš„æœŸå¾…ã€‚ æ‰€ä»¥é€™æ¬¡çš„å…§å®¹å®‰æ’äº†ä¸‰åˆ†ä¹‹ä¸€æ˜¯å¾æœ€åŸºç¤çš„ D3 data-driven è¬›èµ·ï¼Œå†ä¾†æ‰æ˜¯é–‹ç™¼å¿ƒå¾—èˆ‡ç‰¹æ€§çš„ä»‹ç´¹ï¼ŒæœŸæœ›ä¸ç®¡æ˜¯å‰›å…¥é–€çš„æœ‹å‹æˆ–æ˜¯å·²ç¶“æŠ•å…¥é–‹ç™¼çš„è€æ‰‹éƒ½èƒ½å¾ä¸­ç²å¾—äº›ä»€éº¼ã€‚å› ç‚ºæˆ‘èªç‚º Data-Driven æ˜¯ D3.js çš„æ ¸å¿ƒè§€å¿µä¹‹ä¸€ï¼Œåœ¨ç­è§£å¦‚ä½•å°‡è³‡æ–™è½‰ç‚º DOM / SVG å…ƒä»¶ä»¥å¾Œï¼Œå‰©ä¸‹å†å»è®€ D3 çš„ API ç›¸ä¿¡ä¹Ÿèƒ½è¼•æ˜“ä¸Šæ‰‹ã€‚</p>
<p><a href="http://audrey.nu/-/2015/05/16/open-source-enlightenment-2015" title="é–‹æºä¹‹é“ 2015 " target="_blank" rel="external">ã€Œè¬äº‹è¬ç‰©éƒ½æœ‰ç¼ºå£ï¼Œç¼ºå£å°±æ˜¯å…‰çš„å…¥å£ã€</a>ï¼Œå¦‚æœæœ‰ä»€éº¼æ˜¯æˆ‘è¬›çš„ä¸å°çš„åœ°æ–¹ï¼Œä¹Ÿæ­¡è¿ <del>ç”¨åŠ›æ‰“è‡‰</del> ç³¾æ­£ï¼Œç•¢ç«Ÿæˆ‘éƒ½é€™éº¼åšè‡‰çš®å‡ºä¾†åˆ†äº«äº†ï¼Œè®“å°å¼Ÿæˆ‘æœ‰æ©Ÿæœƒç²å¾—æ­£ç¢ºç­”æ¡ˆæ‡‰è©²ä¸éåˆ†ï¼Œå“ˆå“ˆå“ˆã€‚</p>
<p>æœ€å¾Œï¼Œåœ¨é€™è£¡é å‘Šä¸€ä¸‹ï¼Œæ„Ÿè¬ <a href="http://www.meetup.com/Taipei-D3-js-Meetup/" title="Taipei D3.js Meetup" target="_blank" rel="external">Taipei D3.js Meetup</a> çš„é‚€ç´„ï¼Œé è¨ˆåœ¨å…­æœˆä»½æœƒæœ‰ä¸€å ´å°èšçš„åˆ†äº«ï¼Œé¡Œç›®é‚„åœ¨æ§‹æ€ç•¶ä¸­ã€‚ å¦‚æœä½ å° D3 ç›¸é—œè­°é¡Œä¹Ÿæœ‰èˆˆè¶£ï¼Œæ­¡è¿èˆ‡æˆ‘äº¤æµã€‚ :)</p>
<p>ç„¡è«–å¦‚ä½•ï¼Œé‚„æ˜¯æ„Ÿè¬æ¯ä¸€ä½åƒèˆ‡ Modern WebConf çš„æœƒçœ¾ã€è¬›å¸«ä»¥åŠå·¥ä½œäººå“¡ã€‚è¾›è‹¦äº†ã€‚</p>
<p><iframe src="//www.slideshare.net/slideshow/embed_code/key/NdKfJWerFlauo9" width="510" height="420" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/kurotanshi/d3-48180820" title="[Modern WebConf 2015] D3 åœ–è¡¨å„ªåŒ–äºŒä¸‰äº‹" target="_blank">[Modern WebConf 2015] D3 åœ–è¡¨å„ªåŒ–äºŒä¸‰äº‹</a> </strong> from <strong><a href="//www.slideshare.net/kurotanshi" target="_blank">Kuro Hsu</a></strong> </div></p>
<p><div style="margin-top:2em;">å·å·åœ¨åº•ä¸‹æ“ºå¼µ JavaScript ä¹‹çˆ¶ Brendan Eichï¼Œèˆ‡å°å¼Ÿ <del>(è‡ªç¨± JS ä¹‹å­)</del> çš„åˆç…§ç‚«è€€ä¸€ä¸‹ XD</div>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/276313/SIxIklSuRka61onbK0IK_IMG_8751.jpg" alt="IMG_8751.jpg"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[ç­†è¨˜] é˜»æ“‹ android chrome ç¶²é ä¸‹æ‹‰è‡ªå‹•é‡æ•´é é¢]]></title>
      <url>http://kuro.tw/posts/2015/05/11/note-blocking-android-chrome-page-drop-down-automatically-restructure-page/</url>
      <content type="html"><![CDATA[<p>æ—©ä¸Šé–‹æœƒæ™‚ï¼ŒåŒäº‹æåˆ°äº† Android å‡ç´šå¾Œï¼ŒChrome for Android æœƒå‡ºç¾ç¶²é ç•«é¢åœ¨ç€è¦½å™¨é ‚ç«¯æ™‚ï¼Œå¾€ä¸‹æ‹‰æœƒé‡æ•´é é¢çš„å•é¡Œ(<del>å…¶å¯¦æ‡‰è©²èªªæ˜¯ Feature XD</del>)ï¼Œå› ç‚ºé€™å€‹æ–°åŠŸèƒ½æœƒé€ æˆç¶²é ä½¿ç”¨ä¸Šçš„ä¸€äº›å›°æ“¾ï¼Œæ–¼æ˜¯è©¦äº†å¹¾ç¨®æ–¹å¼ï¼Œç™¼ç¾å¯ä»¥é˜»æ“‹ç¶²é é‡æ•´çš„å‹•ä½œï¼Œè¶é‚„æœ‰å°è±¡å°±æŠŠå®ƒè¨˜éŒ„ä¸‹ä¾†ã€‚</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/275711/HX5wrVYQ8WW8gkKhK8rQ_2015-05-11%2015.12.02.jpg" alt="2015-05-11 15.12.02.jpg">
(å°±æ˜¯é€™å€‹å°åœˆåœˆï¼Œçœ‹åˆ°å®ƒå°±ä»£è¡¨ç¶²é è¦é‡æ•´äº†)</p>
<p>åŸç†å…¶å¯¦å¾ˆç°¡å–®ï¼Œå°±æ˜¯åœ¨ç•¶ chrome å·²ç¶“åˆ°é”ç¶²é é ‚ç«¯æ™‚ï¼Œè€Œä¸”åˆ¤æ–· touchmove æ˜¯å¾€ä¸‹æ‹‰æ™‚ï¼ŒæŠŠäº‹ä»¶é˜»æ“‹æ‰ï¼Œå°±å¯ä»¥äº†ã€‚</p>
<p>å¯ä»¥ç”¨ Android è©¦è©¦çœ‹ã€‚
Demo: <a href="http://jsbin.com/conuga/1/" target="_blank" rel="external">http://jsbin.com/conuga/1/</a></p>
<p>è½èªª iOS ä¹Ÿæœ‰é¡ä¼¼å•é¡Œï¼Œä¸éæˆ‘æ‰‹é‚Šæ²’æœ‰ iPhoneï¼Œæ‰€ä»¥ç„¡æ³•æ¸¬è©¦ã€‚ orz</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> isWindowTop = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">var</span> lastTouchY = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> touchStartHandler = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (e.touches.length !== <span class="number">1</span>) <span class="keyword">return</span>;</div><div class="line">        lastTouchY = e.touches[<span class="number">0</span>].clientY;</div><div class="line">        isWindowTop = (<span class="built_in">window</span>.pageYOffset === <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> touchMoveHandler = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> touchY = e.touches[<span class="number">0</span>].clientY;</div><div class="line">        <span class="keyword">var</span> touchYmove = touchY - lastTouchY;</div><div class="line">        lastTouchY = touchY;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (isWindowTop) &#123;</div><div class="line">            isWindowTop = <span class="literal">false</span>;</div><div class="line">            <span class="comment">// é˜»æ“‹ç§»å‹•äº‹ä»¶</span></div><div class="line">            <span class="keyword">if</span> (touchYmove &gt; <span class="number">0</span>) &#123;</div><div class="line">                e.preventDefault();</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'touchstart'</span>, touchStartHandler, <span class="literal">false</span>);</div><div class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'touchmove'</span>, touchMoveHandler, <span class="literal">false</span>);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[ç­†è¨˜] Shapefile to GeoJSON]]></title>
      <url>http://kuro.tw/posts/2015/05/05/note-shapefile-to-geojson/</url>
      <content type="html"><![CDATA[<p>å› ç‚ºæ¯æ¬¡è½‰æª”éƒ½è¦æŸ¥ï¼Œç´¢æ€§æŠŠæ­¥é©Ÿè¨˜éŒ„ä¸‹ä¾†ã€‚</p>
<p>é¦–å…ˆè¦å®‰è£ GDAL (Geospatial Data Abstraction Library) é€™å€‹ç¨‹å¼ï¼Œ
å› ç‚ºæˆ‘æ˜¯ç”¨ Mac ï¼Œæ‰€ä»¥åœ¨ terminal è¼¸å…¥ <code>brew install gdal</code> å°±å¯ä»¥äº†ã€‚</p>
<p>å…¶ä»–ä½œæ¥­ç³»çµ±çš„å®‰è£æ–¹å¼å¯è©³é–± <a href="http://www.gdal.org/" target="_blank" rel="external">http://www.gdal.org/</a> ã€‚</p>
<p>å®‰è£å¥½ gdal ä¹‹å¾Œï¼Œå°±å¯ä»¥é€é ogr2ogr ä¾†åŸ·è¡Œè½‰æª”ï¼Œä¸€æ¨£åœ¨ terminal è¼¸å…¥ï¼š</p>
<p><code>ogr2ogr -f &quot;GeoJSON&quot; output.json source.shp</code></p>
<p>ä»¥è‡ºåŒ—å¸‚æ”¿åºœé–‹æ”¾è³‡æ–™çš„<strong>è‡ºåŒ—å¸‚å€ç•Œåœ–</strong> ( <a href="http://data.taipei/opendata/datalist/datasetMeta?oid=1601ef3a-c253-4988-b047-943d9e786143" target="_blank" rel="external">http://data.taipei/opendata/datalist/datasetMeta?oid=1601ef3a-c253-4988-b047-943d9e786143</a> ) æä¾›çš„ Shapefile ä¾†èªªï¼Œå› ç‚ºå®ƒçš„åæ¨™ç³»çµ±æ˜¯ EPSG:3826(TWD97/121åˆ†å¸¶)ï¼Œæˆ‘å€‘éœ€è¦æŠŠå®ƒè½‰æ›æˆ WGS84ç¶“ç·¯åº¦(EPSG:4326)ï¼Œæ‰€ä»¥é€é <code>-s_srs</code> èˆ‡ <code>-t_srs</code> ä¾†åˆ†åˆ¥æŒ‡å®šè½‰æ›å‰èˆ‡è½‰æ›å¾Œçš„åº§æ¨™ç³»çµ±ï¼š</p>
<p><code>ogr2ogr -f &quot;GeoJSON&quot; -s_srs EPSG:3826 -t_srs EPSG:4326  output.json source.shp</code></p>
<p>è½‰æ›å¾Œçš„ geojson ç›´æ¥è¼¸å‡ºåˆ° google map ä¸Šï¼š
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/263637/UrqBEFSmTuazvdty255S_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-05-05%20%E4%B8%8B%E5%8D%883.47.07.png" alt="è¢å¹•å¿«ç…§ 2015-05-05 ä¸‹åˆ3.47.07.png"></p>
<p>å°±é€™æ¨£ã€‚</p>
<p>[è£œå……]
é—œæ–¼ GeoJson é€åˆ° Google Map çš„éƒ¨åˆ†å¯ä»¥åƒè€ƒæˆ‘çš„å…¶ä»–æ–‡ç« ï¼š
<a href="http://kuro.tw/posts/2015/04/28/through-the-google-maps-api-geojson-data" title="é€é Google Maps API è™•ç† GeoJSON è³‡æ–™">é€é Google Maps API è™•ç† GeoJSON è³‡æ–™</a>
<a href="http://kuro.tw/posts/2015/09/30/use-google-map-view-rainfall-simulation-of-flooding-in-taipei-city-map" title="åˆ©ç”¨ Google Map æª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–">åˆ©ç”¨ Google Map æª¢è¦–å°åŒ—å¸‚é™é›¨æ·¹æ°´æ¨¡æ“¬åœ–</a></p>
<p>åˆï¼Œå¦‚æœéœ€è¦è½‰æ›æˆ TopoJSON çš„è©±ï¼Œä¹Ÿå¯ä»¥åƒè€ƒé€™ç¯‡ï¼š <a href="http://blog.infographics.tw/2015/04/visualize-geographics-with-d3js/" title="è¦–è¦ºåŒ–å¯¦æˆ° ï¼ D3.js åœ°ç†å€å¡Šè¦–è¦ºåŒ–" target="_blank" rel="external">è¦–è¦ºåŒ–å¯¦æˆ° ï¼ D3.js åœ°ç†å€å¡Šè¦–è¦ºåŒ–</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[snippet] D3.js ç”œç”œåœˆåœ– (donut chart) çš„æ”¾å¤§æ¼¸è®Šæ•ˆæœ]]></title>
      <url>http://kuro.tw/posts/2015/05/04/snippet-d3js-donuts-chart-the-transition-effect/</url>
      <content type="html"><![CDATA[<p>åšæ³•å¾ˆç°¡å–®ï¼Œå°±æ˜¯åšå…©å€‹ <code>d3.svg.arc()</code> ç„¶å¾Œåœ¨ <code>mouseover</code> &amp; <code>mouseout</code> çš„æ™‚å€™æ”¹è®Š <code>d</code> å±¬æ€§å³å¯ã€‚</p>
<p>é€™è£å°±æ‹¿ <a href="http://bl.ocks.org/mbostock/3887193" target="_blank" rel="external">http://bl.ocks.org/mbostock/3887193</a> ä½œç‚ºç¯„ä¾‹ã€‚</p>
<p>DEMO: (original charts)
<a href="http://output.jsbin.com/darexo/1/" target="_blank" rel="external">http://output.jsbin.com/darexo/1/</a></p>
<p>DEMO2: (add hover effect)
<a href="http://output.jsbin.com/darexo/3/" target="_blank" rel="external">http://output.jsbin.com/darexo/3/</a></p>
<iframe class="jsbin-embed" src="http://jsbin.com/darexo/3/embed?output" frameborder="0" height="400"></iframe>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// original</span></div><div class="line"><span class="keyword">var</span> arc = d3.svg.arc()</div><div class="line">    .outerRadius(radius - <span class="number">10</span>)</div><div class="line">    .innerRadius(radius - <span class="number">70</span>);</div><div class="line"></div><div class="line"><span class="comment">// arc with scaling</span></div><div class="line"><span class="keyword">var</span> arcOver = d3.svg.arc()</div><div class="line">    .outerRadius(radius)</div><div class="line">    .innerRadius(radius - <span class="number">70</span>);</div></pre></td></tr></table></figure>
<p>ä¸­é–“ç•¥</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// adding mouse events with transition</span></div><div class="line">g.selectAll(<span class="string">".arc &gt; path"</span>)</div><div class="line">true.on(&#123;</div><div class="line">truetrue<span class="string">"mouseover"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>)</span>&#123;</div><div class="line">truetruetrued3.select(<span class="keyword">this</span>).transition().duration(<span class="number">250</span>).attr(<span class="string">'d'</span>, arcOver);</div><div class="line">truetrue&#125;,</div><div class="line">truetrue<span class="string">"mouseout"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>)</span>&#123;</div><div class="line">truetruetrued3.select(<span class="keyword">this</span>).transition().duration(<span class="number">250</span>).attr(<span class="string">'d'</span>, arc);</div><div class="line">truetrue&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è£œå……ï¼šæ„Ÿè¬å°é¦¬æå‡º hover åœ¨ text ä¸Šæœƒç„¡æ³•åŸ·è¡Œå‹•ç•«çš„å•é¡Œã€‚
åªè¦æŠŠ mouse event æ”¹ç¶åœ¨ä¸Šä¸€å±¤çš„ <code>&lt;g&gt;</code> ä¸Šé¢ï¼Œæˆ–æ˜¯åœ¨ text çš„ CSS ä¸‹ <code>pointer-events: none;</code> å–æ¶ˆå®ƒçš„ pointer äº‹ä»¶å³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">g.on(&#123;</div><div class="line">  <span class="string">"mouseover"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>)</span>&#123;</div><div class="line">    d3.select(<span class="keyword">this</span>.childNodes[<span class="number">0</span>]).transition().duration(<span class="number">250</span>).attr(<span class="string">'d'</span>, arcOver);</div><div class="line">  &#125;,</div><div class="line">  <span class="string">"mouseout"</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d, i</span>)</span>&#123;</div><div class="line">    d3.select(<span class="keyword">this</span>.childNodes[<span class="number">0</span>]).transition().duration(<span class="number">250</span>).attr(<span class="string">'d'</span>, arc);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ·ºè«‡ Google map Heat map API ]]></title>
      <url>http://kuro.tw/posts/2015/04/29/a-brief-talk-on-google-map-heat-map-api/</url>
      <content type="html"><![CDATA[<p>å‰é™£å­å› ç‚ºå·¥ä½œçš„éœ€è¦ï¼Œç¨å¾®ç ”ç©¶äº†ä¸€ä¸‹ Google Map æä¾›çš„ HeatMap (ç†±é»åœ–/ç†±åœ–) APIï¼Œå¯¦ä½œæ–¹é¢ä¹Ÿæ»¿å®¹æ˜“çš„ï¼Œåœ¨é€™è£¡å°±ç°¡å–®åšå€‹ç´€éŒ„ã€‚</p>
<p><strong>HeatMap</strong> (ä»¥ä¸‹ç¨±ç†±åœ–) æ˜¯ç”¨ä¾†è¡¨ç¤º<strong>è³‡æ–™æ•¸å€¼å¼·åº¦èˆ‡ä½ç½®çš„å¯è¦–åŒ–</strong>ï¼ŒGoogle ç†±åœ– API åœ¨é è¨­æƒ…æ³ä¸‹ï¼Œé«˜å¼·åº¦çš„æ•¸å€¼æœƒä»¥ç´…è‰²è¡¨ç¤ºï¼Œä½å¼·åº¦çš„æ•¸å€¼å‰‡æ˜¯ä»¥ç¶ è‰²ä¾†è¡¨ç¤ºã€‚</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/262458/gg6DtVUASmSRqxaw8gpk_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-04-29%20%E4%B8%8B%E5%8D%883.37.46.png" alt="è¢å¹•å¿«ç…§ 2015-04-29 ä¸‹åˆ3.37.46.png">
åœ–ç‰‡ä¾†æº: <a href="https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap</a></p>
<p>æœ‰äº†ç°¡å–®çš„èªçŸ¥å¾Œï¼Œé‚£éº¼å°±ä¾†èªªæ˜å¦‚ä½•é€é Google Map API åœ¨ Google Map è¼‰å…¥ç†±åœ–ã€‚</p>
<p>é¦–å…ˆæ˜¯åœ¨è¼‰å…¥ Google Maps API æ™‚ï¼Œå¿…é ˆåŠ å…¥ <strong>visualization</strong> é€™å€‹ libraryã€‚åœ¨å¾Œé¢åŠ å…¥ <code>libraries=visualization</code> å³å¯ï¼Œè¦æ˜¯æƒ³å†åŠ å…¥å…¶ä»– library å¯ç”¨ <code>,</code> é€—è™Ÿéš”é–‹ã€‚å¦‚æœæ²’æœ‰è¼‰å…¥ visualization é€™å€‹ libraryï¼Œç†±åœ–æœƒç„¡æ³•é¡¯ç¤ºã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span></span></div><div class="line">  <span class="attr">src</span>=<span class="string">"https://maps.googleapis.com/maps/api/js?libraries=visualization&amp;sensor=true_or_false"</span>&gt;<span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å†ä¾†ï¼Œå› çˆ²ç†±åœ–å…¶å¯¦æ˜¯ä¸€é€£ä¸² <strong>åº§æ¨™é»</strong> èˆ‡ <strong>æ•¸å€¼</strong> çš„é›†åˆï¼Œæ‰€ä»¥æˆ‘å€‘è¦å…ˆæº–å‚™å¥½ä¸€å€‹é™£åˆ—ä¾†å­˜æ”¾ LatLng ç‰©ä»¶çš„é›†åˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å­˜æ”¾ google.maps.LatLng ç‰©ä»¶çš„é™£åˆ—</span></div><div class="line"><span class="keyword">var</span> heatmapData = [</div><div class="line">  <span class="keyword">new</span> google.maps.LatLng(<span class="number">37.782</span>, <span class="number">-122.447</span>),</div><div class="line">  <span class="keyword">new</span> google.maps.LatLng(<span class="number">37.782</span>, <span class="number">-122.445</span>),</div><div class="line">true<span class="comment">// ä»¥ä¸‹ç•¥ ...</span></div><div class="line">];</div><div class="line"></div><div class="line"><span class="comment">// ç”¢ç”Ÿä¸€å€‹ Heatmap Layer</span></div><div class="line"><span class="keyword">var</span> heatmap = <span class="keyword">new</span> google.maps.visualization.HeatmapLayer(&#123;</div><div class="line">  <span class="attr">data</span>: heatmapData</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// å°‡ heatmap åœ–å±¤åŠ å…¥è‡³ map</span></div><div class="line">heatmap.setMap(map);</div></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦æ”¹è®Šç†±åœ–æ¨£å¼çš„è©±ä¹Ÿå¾ˆç°¡å–®ï¼Œæœ‰å…©ç¨®æ–¹å¼ï¼Œç¬¬ä¸€ç¨®æ˜¯åœ¨ <code>new google.maps.visualization.HeatmapLayer</code> æ™‚åŠ å…¥æ¨£å¼çš„è¨­å®šï¼Œå¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> heatmap = <span class="keyword">new</span> google.maps.visualization.HeatmapLayer(&#123;</div><div class="line">  <span class="attr">data</span>: heatmapData,</div><div class="line">  <span class="attr">gradient</span>: [<span class="string">'transparent'</span>, <span class="string">'#f00'</span>, <span class="string">'#0f0'</span>, <span class="string">'#00f'</span>],	<span class="comment">// æŒ‡å®šé¡è‰²ç¯„åœ ex:é€æ˜, ç´…, ç¶ , è—</span></div><div class="line">  radius: <span class="number">10</span>,				<span class="comment">// æ¯å€‹é»çš„åŠå¾‘ (å–®ä½ px)</span></div><div class="line">  opacity: <span class="number">0.5</span>			<span class="comment">// ç†±åœ–åœ–å±¤é€æ˜åº¦ (0 ~ 1)</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æˆ–æ˜¯æƒ³æ”¹è®Šå·²è¼‰å…¥ç†±åœ–çš„æ¨£å¼ï¼Œå¯ä»¥é€é <code>heatmap.set()</code> :
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ”¹è®Šç¯„åœé¡è‰²</span></div><div class="line">heatmap.set(<span class="string">'gradient'</span>, [<span class="string">'transparent'</span>, <span class="string">'#f00'</span>, <span class="string">'#0f0'</span>, <span class="string">'#00f'</span>]);</div><div class="line"></div><div class="line"><span class="comment">// æ”¹è®Šé€æ˜åº¦</span></div><div class="line">heatmap.set(<span class="string">'opacity'</span>, <span class="number">0.5</span>);</div></pre></td></tr></table></figure></p>
<p>å®Œæ•´ç¯„ä¾‹å¯ä»¥åƒè€ƒ Google Heat Map æ–‡ä»¶ï¼š
<a href="https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap</a></p>
<p>æ¥è‘—ï¼ŒåŒå ´åŠ æ˜ ã€‚</p>
<p>å¦‚æœä»Šå¤©æˆ‘å€‘æœ‰ä¸€ä»½å®Œæ•´çš„ GeoJSON (é—œæ–¼ GeoJSON å¯åƒè€ƒ<a href="http://kuro.tw/posts/2015/04/28/through-the-google-maps-api-geojson-data">å‰ç¯‡ GeoJSON ä»‹ç´¹</a>)æ–‡ä»¶ï¼Œæ˜¯å¦å¯ä»¥ç›´æ¥ç”Ÿæˆç†±åœ–ï¼Ÿ ç•¶ç„¶æ²’å•é¡Œã€‚</p>
<p>æˆ‘å€‘åªè¦å°‡å–å¾—çš„ GeoJSON è§£æå‡ºä¾†ï¼Œä¸¦å­˜å…¥é™£åˆ—å…§å°±å¯ä»¥è¼•é¬†åœ°ç”Ÿæˆç†±åœ–ã€‚</p>
<p>é€™æ˜¯ GeoJSON ç¯„ä¾‹çš„æ ¼å¼ï¼Œå¯ä»¥çœ‹å‡ºä¾†é€™æ˜¯ä¸€å€‹ Pointï¼Œè€Œä¸”æœ‰å€‹å±¬æ€§ valueCountï¼Œå€¼ç‚º 5ã€‚
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"type"</span>: <span class="string">"Feature"</span>,</div><div class="line">  <span class="string">"geometry"</span>: &#123;</div><div class="line">      <span class="string">"type"</span>: <span class="string">"Point"</span>,</div><div class="line">      <span class="string">"coordinates"</span>: [<span class="number">121.52803907522677</span>, <span class="number">25.036051507818932</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="string">"properties"</span>: &#123; <span class="string">"valueCount"</span>: <span class="number">5</span> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç•«ç†±åœ–</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw_heatmap</span>(<span class="params">results</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> heatmapData = [];</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; results.features.length; i++) &#123;</div><div class="line">    <span class="comment">// å–å¾—åº§æ¨™</span></div><div class="line">    <span class="keyword">var</span> coords = results.features[i].geometry.coordinates;</div><div class="line">    <span class="comment">// è¦æ³¨æ„ï¼š LatLng ç‰©ä»¶çš„ç¶“ç·¯åº¦é †åºèˆ‡ GeoJSON çš„åº§æ¨™é †åºç›¸å</span></div><div class="line">    <span class="keyword">var</span> latLng = <span class="keyword">new</span> google.maps.LatLng(coords[<span class="number">1</span>], coords[<span class="number">0</span>]);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> weightedLoc = &#123;</div><div class="line">      <span class="comment">// ä½ç½®</span></div><div class="line">      location: latLng,</div><div class="line">      <span class="comment">// å–®ä½å¼·åº¦ï¼Œé€™è£ç”± GeoJSON å…§çš„ valueCount å±¬æ€§å–å¾—</span></div><div class="line">      weight: results.features[i].properties.valueCount</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    heatmapData.push(weightedLoc);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">true<span class="comment">// ç”Ÿæˆç†±åœ–åœ–å±¤</span></div><div class="line">  <span class="keyword">var</span> heatmap = <span class="keyword">new</span> google.maps.visualization.HeatmapLayer(&#123;</div><div class="line">    <span class="attr">data</span>: heatmapData,</div><div class="line">    <span class="attr">dissipating</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">map</span>: map,</div><div class="line">    <span class="attr">radius</span>: <span class="number">40</span>,</div><div class="line">    <span class="attr">gradient</span>: [<span class="string">'transparent'</span>, <span class="string">'#f00'</span>, <span class="string">'#0f0'</span>, <span class="string">'#00f'</span>]</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/262458/jE7EkvSumXUFaRKArSMw_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-04-29%20%E4%B8%8B%E5%8D%883.50.00.png" alt="è¢å¹•å¿«ç…§ 2015-04-29 ä¸‹åˆ3.50.00.png">
DEMO: <a href="http://jsbin.com/xafagi/1/" target="_blank" rel="external">http://jsbin.com/xafagi/1/</a></p>
<p>å¦‚æœæƒ³è¦ debug ç¢ºèªç”Ÿæˆçš„ç†±åœ–æ˜¯å¦æ­£ç¢ºï¼Œå› ç‚ºæˆ‘å€‘æ˜¯åˆ©ç”¨ GeoJSON ç”¢ç”Ÿç†±åœ–ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥é€é <code>map.data.addGeoJson( geoJson );</code> ä¾†åŠ å…¥ marker ä¾›æˆ‘å€‘ç¢ºèªã€‚
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/262458/iU5KQsFgRQKTwgEjNraG_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-04-29%20%E4%B8%8B%E5%8D%883.59.13.png" alt="è¢å¹•å¿«ç…§ 2015-04-29 ä¸‹åˆ3.59.13.png">
DEMO: <a href="http://jsbin.com/xafagi/2/" target="_blank" rel="external">http://jsbin.com/xafagi/2/</a></p>
<p>åƒè€ƒè³‡æ–™ï¼š
<a href="https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap</a>
<a href="https://developers.google.com/maps/documentation/javascript/heatmaplayer" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/heatmaplayer</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[é€é Google Maps API è™•ç† GeoJSON è³‡æ–™]]></title>
      <url>http://kuro.tw/posts/2015/04/28/through-the-google-maps-api-geojson-data/</url>
      <content type="html"><![CDATA[<p>åœ¨èªªæ˜ Google Map å¦‚ä½•å­˜å– GeoJSON å‰ï¼Œå…ˆä¾†ç°¡å–®ä»‹ç´¹ GeoJSONã€‚</p>
<p><a href="http://geojson.org/" title="GeoJSON" target="_blank" rel="external">GeoJSON</a> æ˜¯ä¸€ç¨®å°ˆé–€è™•ç†åœ°ç†è³‡è¨Š (GIS) çµæ§‹çš„ JSON æ¨™æº–æ ¼å¼ã€‚ ä¸€å€‹ GeoJSON ç‰©ä»¶å¯ä»¥ç”¨ä¾†ä»£è¡¨<strong>é»</strong> (Point)ï¼Œ<strong>ç·š</strong> (LineString)ï¼Œ<strong>å¤šé‚Šå½¢</strong> (Polygon) ç­‰ç­‰çš„å¹¾ä½•çµæ§‹ï¼Œä»¥åŠ<strong>ç‰¹å¾µ</strong> (Feature) çš„é›†åˆï¼Œæˆ–æ˜¯<strong>ä¸€ç³»åˆ—çš„ç‰¹å¾µ</strong> (FeatureCollection)ã€‚</p>
<p>ä¹Ÿå› ç‚º GeoJSON æ˜¯ä¸€ç¨®åŸºæ–¼ JSON çš„å…¬é–‹æ¨™æº–ï¼Œå…¶çµæ§‹ç°¡å–®ä¸”å®¹æ˜“è®€å–çš„ç‰¹æ€§ä¹Ÿå»£å—é–‹ç™¼è€…çš„æ­¡è¿ï¼Œæœ‰ä¸å°‘é–‹ç™¼ç¨‹å¼åº«é–‹å§‹æ”¯æ´ GeoJSON çš„è™•ç†ï¼Œä¹Ÿæœ‰è¨±å¤šæ”¿åºœé–‹æ”¾è³‡æ–™(å®˜æ–¹æˆ–éå®˜æ–¹)é–‹å§‹æä¾› GeoJSON ä½œç‚ºå…¶è³‡æ–™æ ¼å¼ã€‚</p>
<p>ä¸€å€‹ç°¡å–®çš„ GeoJSON æœƒé•·å¾—åƒé€™å€‹æ¨£å­ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"type"</span>: <span class="string">"FeatureCollection"</span>,</div><div class="line">    <span class="string">"features"</span>: [&#123;</div><div class="line">        <span class="string">"type"</span>: <span class="string">"Feature"</span>,</div><div class="line">        <span class="string">"geometry"</span>: &#123;</div><div class="line">            <span class="string">"type"</span>: <span class="string">"Point"</span>,</div><div class="line">            <span class="string">"coordinates"</span>: [<span class="number">102.0</span>, <span class="number">0.5</span>]</div><div class="line">        &#125;,</div><div class="line">        <span class="string">"properties"</span>: &#123;</div><div class="line">            <span class="string">"prop0"</span>: <span class="string">"value0"</span></div><div class="line">        &#125;</div><div class="line">    &#125;, &#123;</div><div class="line">        <span class="string">"type"</span>: <span class="string">"Feature"</span>,</div><div class="line">        <span class="string">"geometry"</span>: &#123;</div><div class="line">            <span class="string">"type"</span>: <span class="string">"LineString"</span>,</div><div class="line">            <span class="string">"coordinates"</span>: [</div><div class="line">                [<span class="number">102.0</span>, <span class="number">0.0</span>],</div><div class="line">                [<span class="number">103.0</span>, <span class="number">1.0</span>],</div><div class="line">                [<span class="number">104.0</span>, <span class="number">0.0</span>],</div><div class="line">                [<span class="number">105.0</span>, <span class="number">1.0</span>]</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">        <span class="string">"properties"</span>: &#123;</div><div class="line">            <span class="string">"prop0"</span>: <span class="string">"value0"</span>,</div><div class="line">            <span class="string">"prop1"</span>: <span class="number">0.0</span></div><div class="line">        &#125;</div><div class="line">    &#125;, &#123;</div><div class="line">        <span class="string">"type"</span>: <span class="string">"Feature"</span>,</div><div class="line">        <span class="string">"geometry"</span>: &#123;</div><div class="line">            <span class="string">"type"</span>: <span class="string">"Polygon"</span>,</div><div class="line">            <span class="string">"coordinates"</span>: [</div><div class="line">                [</div><div class="line">                    [<span class="number">100.0</span>, <span class="number">0.0</span>],</div><div class="line">                    [<span class="number">101.0</span>, <span class="number">0.0</span>],</div><div class="line">                    [<span class="number">101.0</span>, <span class="number">1.0</span>],</div><div class="line">                    [<span class="number">100.0</span>, <span class="number">1.0</span>],</div><div class="line">                    [<span class="number">100.0</span>, <span class="number">0.0</span>]</div><div class="line">                ]</div><div class="line">            ]</div><div class="line">        &#125;,</div><div class="line">        <span class="string">"properties"</span>: &#123;</div><div class="line">            <span class="string">"prop0"</span>: <span class="string">"value0"</span>,</div><div class="line">            <span class="string">"prop1"</span>: &#123;</div><div class="line">                <span class="string">"this"</span>: <span class="string">"that"</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæ¯ä¸€ç­†è³‡æ–™éƒ½æœƒæ˜¯ä¸€å€‹ã€Œ<strong>Feature</strong>ã€ç‰©ä»¶ï¼Œåœ°ç†ä½ç½®ç›¸é—œè³‡è¨Šæœƒå­˜æ”¾åœ¨ geometry ç‰©ä»¶å…§ï¼Œå…¶ä¸­åˆ†åˆ¥æœ‰ã€Œ<strong>type</strong>ã€ä»¥åŠã€Œ<strong>coordinates</strong>ã€å±¬æ€§ï¼Œtype ç”¨ä¾†è¡¨ç¤ºè³‡æ–™é¡åˆ¥ï¼Œå¯ä»¥æ˜¯é»ï¼Œç·šï¼Œç”šè‡³æ˜¯å¤šé‚Šå½¢ç­‰ï¼›è€Œ coordinates ç”¨ä¾†å­˜æ”¾ç¶“ç·¯åº¦åº§æ¨™ã€‚è€Œå…¶ä»–çš„ç›¸é—œè³‡è¨Šå‰‡æœƒæ”¾åœ¨ã€Œ<strong>properties</strong>ã€å…§ï¼Œä»¥ <strong>key: value</strong> æ–¹å¼å‘ˆç¾ã€‚</p>
<p>ç°¡å–®ä»‹ç´¹å°±åˆ°æ­¤ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥åƒè€ƒ <a href="http://geojson.org/" target="_blank" rel="external">http://geojson.org/</a>
è¨»ï¼šé€™è£æœ‰ä¸­åœ‹ç¶²å‹ç¿»è­¯çš„ GeoJSON è¦æ ¼ <a href="http://www.oschina.net/translate/geojson-spec" target="_blank" rel="external">http://www.oschina.net/translate/geojson-spec</a></p>
<p>å›åˆ°ä¸»é¡Œã€‚
Google Map åŒ¯å…¥ GeoJSON çš„æ–¹å¼éå¸¸ç°¡å–®ï¼Œå¦‚æœå·²ç¶“æœ‰ä¸€å€‹å®Œæ•´çš„ GeoJSON æª”æ¡ˆçš„è©±ï¼Œé‚£éº¼é€é</p>
<p><code>map.data.loadGeoJson(FILE-URL);</code></p>
<p>åˆ©ç”¨é€™ä¸€è¡Œç¨‹å¼ç¢¼å°±å¯ä»¥è¼‰å…¥ GeoJSON è‡³ Google Map çš„ Data Layer äº†ã€‚</p>
<p>ç°¡å–®ç¯„ä¾‹ï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMap</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// åœ°åœ–åˆå§‹è¨­å®š</span></div><div class="line">    <span class="keyword">var</span> mapOptions = &#123;</div><div class="line">        <span class="attr">center</span>: <span class="keyword">new</span> google.maps.LatLng(<span class="number">25.04674</span>, <span class="number">121.54168</span>),</div><div class="line">        <span class="attr">zoom</span>: <span class="number">13</span>,</div><div class="line">        <span class="attr">mapTypeId</span>: google.maps.MapTypeId.ROADMAP</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">// GeoJSON file</span></div><div class="line">    <span class="keyword">var</span> url = <span class="string">'https://dl.dropboxusercontent.com/u/12537630/geo.json'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> mapElement = <span class="built_in">document</span>.getElementById(<span class="string">"mapDiv"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Google åœ°åœ–åˆå§‹åŒ–</span></div><div class="line">    map = <span class="keyword">new</span> google.maps.Map(mapElement, mapOptions);</div><div class="line"></div><div class="line">    <span class="comment">// è¼‰å…¥ GeoJSON è³‡æ–™</span></div><div class="line">    map.data.loadGeoJson(url);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>DEMO: <a href="http://jsbin.com/totuzisobo/1/" target="_blank" rel="external">http://jsbin.com/totuzisobo/1/</a>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/262352/sSKDGsS7RUqG2TluFYJC_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-04-28%20%E4%B8%8B%E5%8D%887.15.40.png" alt="è¢å¹•å¿«ç…§ 2015-04-28 ä¸‹åˆ7.15.40.png"></p>
<p>å¦‚æœå¸Œæœ›è¼‰å…¥çš„è³‡æ–™å¯ä»¥æœ‰è‡ªè¨‚çš„æ¨£å¼çš„è©±ï¼Œå¯ä»¥é€é <code>map.data.setStyle</code> åœ¨è¼‰å…¥å‰æŒ‡å®šå¥½å¸Œæœ›çš„ styleï¼Œé€™è£ä»¥ marker çš„åœ–ç¤ºç‚ºä¾‹ï¼š</p>
<p>åœ–ç¤ºè³‡è¨Šæˆ‘æ”¾åœ¨ GeoJSON çš„ <code>properties.icon</code> å…§ï¼Œå¦‚ä¸‹ (å…¶ä¸­ä¸€ç­† point çš„å…§å®¹)ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="string">"type"</span>: <span class="string">"Feature"</span>,</div><div class="line"><span class="string">"geometry"</span>: &#123;</div><div class="line"> <span class="string">"type"</span>: <span class="string">"Point"</span>,</div><div class="line"> <span class="string">"coordinates"</span>: [ <span class="number">121.51771545410156</span>, <span class="number">25.028294990979614</span> ]</div><div class="line">&#125;,</div><div class="line"><span class="string">"properties"</span>: &#123;</div><div class="line">true<span class="string">"icon"</span>: <span class="string">"http://google-maps-icons.googlecode.com/files/vegetarian.png"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ–¼æ˜¯æˆ‘å€‘å¯ä»¥é€é <code>feature.getProperty(&#39;icon&#39;)</code> å»æŒ‡å®šæ¯ä¸€ç­† point çš„åœ–ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è‡ªè¨‚æ¨£å¼</span></div><div class="line">map.data.setStyle(<span class="function"><span class="keyword">function</span>(<span class="params">feature</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123; <span class="string">'icon'</span>: feature.getProperty(<span class="string">'icon'</span>) &#125;;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// è¼‰å…¥ GeoJSON è³‡æ–™</span></div><div class="line">map.data.loadGeoJson(url);</div></pre></td></tr></table></figure>
<p>DEMO: <a href="http://jsbin.com/xikaqe/1/" target="_blank" rel="external">http://jsbin.com/xikaqe/1/</a>
<img src="http://user-image.logdown.io/user/3292/blog/3340/post/262352/u5lfzGXOQVaVY7zkw57q_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-04-28%20%E4%B8%8B%E5%8D%887.15.46.png" alt="è¢å¹•å¿«ç…§ 2015-04-28 ä¸‹åˆ7.15.46.png"></p>
<p>å¦‚æœå¸Œæœ›é€é ajax æ–¹å¼è¼‰å…¥ GeoJSON çš„è©±ä¹Ÿéå¸¸ç°¡å–®ï¼Œåœ¨å–å¾— ajax å›å‚³è³‡æ–™æ™‚ï¼Œç”¨ <code>map.data.addGeoJson(res);</code> é€™è¡Œå°±å¯ä»¥è¼‰å…¥è³‡æ–™äº†ã€‚</p>
<p>ä»¥ jQuery ç‚ºä¾‹ï¼Œå¦‚:
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$.get(FILE-URL, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123; map.data.addGeoJson(res); &#125;);</div></pre></td></tr></table></figure></p>
<p>æœ‰å€‹æ•´ç†å¥½çš„ GeoJSONï¼Œåªéœ€è¦ä¸€è¡Œå°±å¯ä»¥å¾ˆè¼•é¬†åœ°åœ¨ Google Map ç”¢ç”Ÿæƒ³è¦çš„åœ–æ¨™äº†ã€‚
å¦‚æœæƒ³åœ¨åœ–è¡¨ä¸Šè™•ç†é»æ“Šç­‰ç­‰çš„äº‹ä»¶ï¼Œé‚„æ˜¯å¾—å¦å¤–è™•ç†å–”ã€‚</p>
<p>åƒè€ƒè³‡æ–™:
<a href="https://developers.google.com/maps/documentation/javascript/examples/layer-data-simple" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/examples/layer-data-simple</a>
<a href="https://developers.google.com/maps/documentation/javascript/examples/layer-data-quakes" target="_blank" rel="external">https://developers.google.com/maps/documentation/javascript/examples/layer-data-quakes</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[é€é Google map Geocoder API ä»¥ç¶“ç·¯åº¦è½‰æ›åœ°å€è³‡è¨Š]]></title>
      <url>http://kuro.tw/posts/2015/04/27/address-information-is-obtained-through-google-map-geocoder-with-the-latitude-and-longitude/</url>
      <content type="html"><![CDATA[<p>å‰é™£å­å› ç‚ºéœ€æ±‚çš„é—œä¿‚ï¼Œéœ€è¦ä»¥ç¶“ç·¯åº¦ä¾†è½‰æ›åœ°å€ï¼Œå¹¸å¥½ Google map API æœ‰æä¾› Geocoder å¯ä»¥è½‰æ›å¤§ç•¥åœ°å€çš„æœå‹™ã€‚ä½¿ç”¨æ–¹å¼éå¸¸ç°¡å–®ï¼Œæˆ‘å€‘é€™è£¡ä»¥ç«‹æ³•é™¢çš„ç¶“ç·¯åº¦ (25.0439892, 121.5212213) ç‚ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> geocoder = <span class="keyword">new</span> google.maps.Geocoder();</div><div class="line"></div><div class="line"><span class="comment">// google.maps.LatLng ç‰©ä»¶</span></div><div class="line"><span class="keyword">var</span> coord = <span class="keyword">new</span> google.maps.LatLng(<span class="number">25.0439892</span>, <span class="number">121.5212213</span>);</div><div class="line"></div><div class="line"><span class="comment">// å‚³å…¥ latLng è³‡è¨Šè‡³ geocoder.geocode</span></div><div class="line">geocoder.geocode(&#123;<span class="string">'latLng'</span>: coord &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">results, status</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (status === google.maps.GeocoderStatus.OK) &#123;</div><div class="line">    <span class="comment">// å¦‚æœæœ‰è³‡æ–™å°±æœƒå›å‚³</span></div><div class="line">    <span class="keyword">if</span> (results) &#123;</div><div class="line">      <span class="built_in">console</span>.log(results[<span class="number">0</span>]);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// ç¶“ç·¯åº¦è³‡è¨ŠéŒ¯èª¤</span></div><div class="line">  <span class="keyword">else</span> &#123;</div><div class="line">    alert(<span class="string">"Reverse Geocoding failed because: "</span> + status);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æˆ‘å€‘å‚³å…¥ç¶“ç·¯åº¦è³‡è¨Š google.maps.LatLng ç‰©ä»¶ï¼Œé€é <code>geocoder.geocode</code> è½‰æ›å‡ºä¾†çš„çµæœæœƒæ˜¯é€™æ¨£çš„ï¼š</p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/262289/0bIqy71dT8Sb3YwERlEs_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-04-27%20%E4%B8%8B%E5%8D%8810.42.56.png" alt="è¢å¹•å¿«ç…§ 2015-04-27 ä¸‹åˆ10.42.56.png"></p>
<p>å¦‚ä¸Šåœ–ï¼ŒGoogle map Geocoder API æœƒå›å‚³ä¸€é€£ä¸²çš„åœ°å€è³‡è¨Šï¼Œå¦‚æœä½ éœ€è¦çš„æ˜¯å·²ç¶“æ•´åˆå¥½æ ¼å¼çš„åœ°å€ï¼Œé‚£éº¼å°‡ä¸Šé¢ç¯„ä¾‹ä¸­çš„<code>results[0]</code> æ”¹ç‚º <code>results[0].formatted_address</code> å°±å¯ä»¥å–å¾—ã€Œ<strong>100å°ç£å°åŒ—å¸‚ä¸­æ­£å€é’å³¶æ±è·¯1è™Ÿ</strong>ã€é€™æ¨£çš„åœ°å€è³‡è¨Šäº†ã€‚</p>
<p>ä¸‹é¢æä¾›ä¸€å€‹å®Œæ•´çš„ç¯„ä¾‹ä¾›å„ä½åƒè€ƒï¼š
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map, geocoder, popup;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMap</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    geocoder = <span class="keyword">new</span> google.maps.Geocoder();</div><div class="line">    popup = <span class="keyword">new</span> google.maps.InfoWindow();</div><div class="line"></div><div class="line">    <span class="comment">// åœ°åœ–åˆå§‹è¨­å®š</span></div><div class="line">    <span class="keyword">var</span> mapOptions = &#123;</div><div class="line">        <span class="attr">center</span>: <span class="keyword">new</span> google.maps.LatLng(<span class="number">25.04674</span>, <span class="number">121.52168</span>),</div><div class="line">        <span class="attr">zoom</span>: <span class="number">16</span>,</div><div class="line">        <span class="attr">mapTypeId</span>: google.maps.MapTypeId.ROADMAP</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> mapElement = <span class="built_in">document</span>.getElementById(<span class="string">"mapDiv"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Google åœ°åœ–åˆå§‹åŒ–</span></div><div class="line">    map = <span class="keyword">new</span> google.maps.Map(mapElement, mapOptions);</div><div class="line"></div><div class="line">    <span class="comment">// è¨­å®š Google map ç¹ªåœ–æ§åˆ¶é …</span></div><div class="line">    <span class="keyword">var</span> drawingManager = <span class="keyword">new</span> google.maps.drawing.DrawingManager(&#123;</div><div class="line">        <span class="attr">drawingMode</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">drawingControl</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">drawingControlOptions</span>: &#123;</div><div class="line">            <span class="attr">position</span>: google.maps.ControlPosition.TOP_CENTER,</div><div class="line">            <span class="attr">drawingModes</span>: [google.maps.drawing.OverlayType.MARKER]</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// é–‹å•Ÿ Google map ç¹ªåœ–æ§åˆ¶é …</span></div><div class="line">    drawingManager.setMap(map);</div><div class="line"></div><div class="line">    <span class="comment">// åœ¨åœ°åœ–ä¸­åŠ å…¥ marker</span></div><div class="line">    google.maps.event.addListener(drawingManager, <span class="string">'markercomplete'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">marker</span>) </span>&#123;</div><div class="line">        <span class="comment">// å–å¾— marker çš„ç¶“ç·¯åº§æ¨™</span></div><div class="line">        <span class="keyword">var</span> markerPosition = marker.getPosition();</div><div class="line"></div><div class="line">        <span class="comment">// å°‡ç¶“ç·¯åº¦é€é Google map Geocoder API åæŸ¥åœ°å€</span></div><div class="line">        geocoder.geocode(&#123;</div><div class="line">          <span class="string">'latLng'</span>: markerPosition</div><div class="line">        &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">results, status</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (status === google.maps.GeocoderStatus.OK) &#123;</div><div class="line">                <span class="keyword">if</span> (results) &#123;</div><div class="line">                    <span class="comment">// å°‡å–å¾—çš„è³‡è¨Šå‚³å…¥ marker è¨Šæ¯æ³¡æ³¡</span></div><div class="line">                    showAddress(results[<span class="number">0</span>], marker);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                alert(<span class="string">"Reverse Geocoding failed because: "</span> + status);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// è¨­å®š marker çš„è¨Šæ¯æ³¡æ³¡</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showAddress</span>(<span class="params">result, marker</span>) </span>&#123;</div><div class="line">        map.setCenter(marker.getPosition());</div><div class="line">        <span class="comment">// é¡¯ç¤ºå‚³å…¥çš„åœ°å€è³‡è¨Š</span></div><div class="line">        <span class="keyword">var</span> popupContent = <span class="string">'&lt;b&gt;åœ°å€: &lt;/b&gt; '</span> + result.formatted_address;</div><div class="line">        popup.setContent(popupContent);</div><div class="line">        popup.open(map, marker);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://user-image.logdown.io/user/3292/blog/3340/post/262289/boE1unBmQsCitdOxHG01_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202015-04-27%20%E4%B8%8B%E5%8D%8810.52.20.png" alt="è¢å¹•å¿«ç…§ 2015-04-27 ä¸‹åˆ10.52.20.png"></p>
<p>Demo: <a href="http://jsbin.com/penuqofabe/1/" target="_blank" rel="external">http://jsbin.com/penuqofabe/1/</a></p>
<p>åƒè€ƒç¶²å€: <a href="https://developers.google.com/maps/documentation/javascript/geocoding?hl=zh-tw" target="_blank" rel="external">Google Map åœ°ç†ç·¨ç¢¼æœå‹™</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[note] jQuery èˆ‡ d3.js çš„ä¸€äº›ä¸åŒä¹‹è™•]]></title>
      <url>http://kuro.tw/posts/2015/04/22/note-jquery-and-d3js-some-of-these-differences/</url>
      <content type="html"><![CDATA[<p>ä»¥å‰è·Ÿäººå®¶ä»‹ç´¹ d3.js çš„æ™‚å€™ï¼Œæˆ‘éƒ½æœƒç¬‘ç¨± d3.js å…¶å¯¦å°±æ˜¯ SVG ç•Œçš„ jQueryã€‚
ä½†æ˜¯æœ€è¿‘ç™¼ç¾ä¸å°‘äººå°å…©è€…çš„ select ä»¥åŠ append æœ‰äº›ç–‘å•ï¼Œç‰¹åˆ¥æŠŠå®ƒå¯«ä¸‹ä¾†ç´€éŒ„ã€‚</p>
<p>å…ˆèªªå¤§å®¶æ¯”è¼ƒç†Ÿæ‚‰çš„ jQueryï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"body"</span>)</div><div class="line">  .append(<span class="string">"&lt;div&gt;&lt;/div&gt;"</span>)</div><div class="line">  .append(<span class="string">"&lt;em&gt;&lt;/em&gt;"</span>);</div></pre></td></tr></table></figure>
<p>ä¸Šé¢é€™æ®µç¨‹å¼ç¢¼ç”¢ç”Ÿçš„ HTML æ‡‰è©²æœƒæ˜¯é€™æ¨£çš„</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è€Œåœ¨ d3.js çš„æƒ…æ³ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">d3.select(<span class="string">"body"</span>)</div><div class="line">  .append(<span class="string">"div"</span>)</div><div class="line">    .append(<span class="string">"em"</span>);</div></pre></td></tr></table></figure>
<p>æ‰€ç”¢ç”Ÿçš„ HTML çµæ§‹æœƒæ˜¯é€™æ¨£çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å…©è€…æœ€å¤§çš„å·®ç•°é»åœ¨æ–¼ jQuery çš„
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"body"</span>).append(...)</div></pre></td></tr></table></figure></p>
<p>å›å‚³çš„æœƒæ˜¯ $(&#39;body&#39;) æœ¬èº«ï¼Œè€Œ d3.js çš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">d3.select(<span class="string">"body"</span>).append(...)</div></pre></td></tr></table></figure>
<p>å›å‚³çš„æœƒæ˜¯ append å¾Œçš„ DOM
(ä»¥ä¸Šé¢çš„ç¯„ä¾‹ä¾†èªªï¼Œ<code>d3.select(&quot;body&quot;).append(&#39;div&#39;)</code> å›å‚³çš„å°±æœƒæ˜¯ <code>&lt;div&gt;&lt;/div&gt;</code> )ï¼Œ
æ‰€ä»¥å†æ¬¡åŸ·è¡Œ append æ™‚ï¼Œå°±æœƒå°‡ DOM åŠ å…¥åœ¨å‰ä¸€å€‹ append çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ <code>&lt;div&gt;&lt;/div&gt;</code> ä¹‹å…§ã€‚</p>
<p>é‚£éº¼ jQuery æ˜¯å¦ä¹Ÿå¯ä»¥åƒ d3.js é€™æ¨£ append åœ¨æ–° DOM å…§å‘¢ï¼Ÿ
å…ˆå°‡ em åŒ…åœ¨ div å…§ï¼Œæœ€å¤–å±¤å†åŒ…ä¸€å±¤ append å°±å¯ä»¥åšåˆ°äº†ã€‚
åƒé€™æ¨£ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"body"</span>).append( $(<span class="string">'&lt;div&gt;'</span>).append( $(<span class="string">'&lt;em&gt;'</span>) ) );</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[åµæ¸¬ Google Map çš„ InfoWindow è¨Šæ¯æ¡†æ˜¯å¦è¢«é–‹å•Ÿ (v3)]]></title>
      <url>http://kuro.tw/posts/2014/08/08/google-map-infowindow-bubble-detection-box-is-opened/</url>
      <content type="html"><![CDATA[<p>å› ç‚º Google Map çš„ InfoWindow æ˜¯è¢«æ–°å¢å‡ºä¾†çš„ç‰©ä»¶ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥é€éä¿®æ”¹ prototype çš„æ–¹å¼ï¼Œæ›¿ InfoWindow å¢åŠ æ–°çš„ methodã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">google.maps.InfoWindow.prototype.isOpen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> map = <span class="keyword">this</span>.getMap();</div><div class="line">  <span class="keyword">return</span> (map !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> map !== <span class="string">"undefined"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> popup = <span class="keyword">new</span> google.maps.InfoWindow();</div><div class="line">popup.isOpen();  <span class="comment">// will return ture or false.</span></div></pre></td></tr></table></figure>
<p>åƒè€ƒè³‡æ–™ï¼š <a href="http://stackoverflow.com/a/12410385" target="_blank" rel="external">http://stackoverflow.com/a/12410385</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[PHP] å°‡ HTML5 Canvas ç”¢ç”Ÿçš„åœ–ç‰‡ä¸Šå‚³è‡³ä¼ºæœå™¨ç«¯è™•ç†]]></title>
      <url>http://kuro.tw/posts/2013/09/08/php-html5-canvas-resulting-base64-datauri-images-will-be-uploaded-to-the-server-side-processing/</url>
      <content type="html"><![CDATA[<p>ä¸€èˆ¬ä¾†èªªæœ‰å…©ç¨®è™•ç†æ–¹å¼ï¼š</p>
<h2 id="ç›´æ¥æŠŠ-DataURI-å­—ä¸²å„²å­˜èµ·ä¾†ï¼Œç­‰è¦ç”¨çš„æ™‚å€™ç›´æ¥è¼¸å‡ºè‡³-lt-img-gt-çš„-src-å±¬æ€§æˆ–æ˜¯-CSS-ä¸­ï¼š"><a href="#ç›´æ¥æŠŠ-DataURI-å­—ä¸²å„²å­˜èµ·ä¾†ï¼Œç­‰è¦ç”¨çš„æ™‚å€™ç›´æ¥è¼¸å‡ºè‡³-lt-img-gt-çš„-src-å±¬æ€§æˆ–æ˜¯-CSS-ä¸­ï¼š" class="headerlink" title="ç›´æ¥æŠŠ DataURI å­—ä¸²å„²å­˜èµ·ä¾†ï¼Œç­‰è¦ç”¨çš„æ™‚å€™ç›´æ¥è¼¸å‡ºè‡³ &lt;img&gt; çš„ src å±¬æ€§æˆ–æ˜¯ CSS ä¸­ï¼š"></a>ç›´æ¥æŠŠ DataURI å­—ä¸²å„²å­˜èµ·ä¾†ï¼Œç­‰è¦ç”¨çš„æ™‚å€™ç›´æ¥è¼¸å‡ºè‡³ <code>&lt;img&gt;</code> çš„ src å±¬æ€§æˆ–æ˜¯ CSS ä¸­ï¼š</h2><p>  åƒé€™æ¨£ï¼š</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&lt;?php echo $base64_img_string; ?&gt;"</span> /&gt;</span></div></pre></td></tr></table></figure>
<p>  å¯¦éš›åŸ·è¡Œçš„æ™‚å€™æœƒé•·å¾—åƒé€™æ¨£ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"data:image/png;base64,......(å¾Œç•¥)"</span> /&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>å„ªé»ï¼š
ç°¡å–®æ˜“ç”¨ï¼Œå¹¾ä¹ä¸éœ€è¦åšä»»ä½•è™•ç†ã€‚
HTTP Request è®Šå°‘ï¼Œå‚³é€ä¸€å€‹å¤§æª”æ¡ˆæœƒæ¯”é€£çºŒå‚³é€å¤šå€‹æ‹†è§£çš„å°æª”æ›´å¿«é€Ÿæœ‰æ•ˆç‡ï¼Œä¸”ç¯€çœé »å¯¬ã€‚</li>
</ul>
<ul>
<li>ç¼ºé»ï¼š
IE7 ä»¥å‰çš„ç‰ˆæœ¬ä¸æ”¯æ´ DataURI æ ¼å¼ã€‚ IE8 é–‹å§‹é›–ç„¶æœ‰æ”¯æ´ï¼Œä½†é™åˆ¶å¤§å°ä¸å¯è¶…é 32KB
åœ–æª”å¤§çš„æ™‚å€™ç”¢ç”Ÿçš„ DataURI String å¤§å¾—é©šäºº(æ¯”åŸæœ¬çš„åœ–æª”é‚„å¤§ç´„ 1/3)
åœ–æª”ä¿®æ”¹å¾Œå¿…é ˆè¦é‡æ–°ç·¨ç¢¼ï¼Œç›¸å°çš„åµŒå…¥ DataURI String çš„ç¶²é ä¹Ÿéƒ½è¦è·Ÿè‘—ä¿®æ­£
å› åœ–ç‰‡è·Ÿç¶²é ç¶å†ä¸€èµ·ï¼Œä¸åˆ©å¿«å–</li>
</ul>
<h2 id="å°‡-base64-DataURI-é€åˆ°-PHP-ç«¯å„²å­˜æˆåœ–ç‰‡å¾Œä½¿ç”¨ï¼š"><a href="#å°‡-base64-DataURI-é€åˆ°-PHP-ç«¯å„²å­˜æˆåœ–ç‰‡å¾Œä½¿ç”¨ï¼š" class="headerlink" title="å°‡ base64 DataURI é€åˆ° PHP ç«¯å„²å­˜æˆåœ–ç‰‡å¾Œä½¿ç”¨ï¼š"></a>å°‡ base64 DataURI é€åˆ° PHP ç«¯å„²å­˜æˆåœ–ç‰‡å¾Œä½¿ç”¨ï¼š</h2><p>  å¦‚æ¨™é¡Œï¼Œæ‡‰è©²ä¸éœ€è¦å¤šåŠ è§£é‡‹äº†ï¼Œå°±æ˜¯åˆ©ç”¨ <code>base64_decode()</code> å°‡ data uri åè§£ï¼Œ
  ç›´æ¥çœ‹ codeã€‚ PHP çš„éƒ¨åˆ†ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="comment">// è¨­å®šåœ–æª”ä¸Šå‚³è·¯å¾‘</span></div><div class="line">  define(<span class="string">'UPLOAD_PATH'</span>, <span class="string">'images/'</span>);</div><div class="line"></div><div class="line">  <span class="comment">// æ¥æ”¶ POST é€²ä¾†çš„ base64 DtatURI String</span></div><div class="line">  $img = $_POST[<span class="string">'data'</span>];</div><div class="line"></div><div class="line">  <span class="comment">// è½‰æª” &amp; å­˜æª”</span></div><div class="line">  $img = str_replace(<span class="string">'data:image/png;base64,'</span>, <span class="string">''</span>, $img);</div><div class="line">  $img = str_replace(<span class="string">' '</span>, <span class="string">'+'</span>, $img);</div><div class="line">  $data = base64_decode($img);</div><div class="line">  $file = UPLOAD_PATH . uniqid() . <span class="string">'.png'</span>;</div><div class="line">  $success = file_put_contents($file, $data);</div><div class="line"></div><div class="line">  <span class="comment">// output string</span></div><div class="line">  $output = ($success) ? <span class="string">'&lt;img src="'</span>. $file .<span class="string">'" alt="Canvas Image" /&gt;'</span> : <span class="string">'&lt;p&gt;Unable to save the file.&lt;/p&gt;'</span>;</div></pre></td></tr></table></figure>
<p>  View çš„éƒ¨åˆ† (HTML)ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>PHP base64 image decode demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- æˆåŠŸå­˜æª”çš„è©±æœƒç§€å‡º img æ¨™ç±¤ä»¥åŠåœ–æª”ï¼Œå¤±æ•—çš„è©±æœƒå‡ºç¾ Unable to save the file çš„è¨Šæ¯ --&gt;</span></div><div class="line">    <span class="php"><span class="meta">&lt;?php</span> <span class="keyword">print</span> $output; <span class="meta">?&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>é€™æ¨£å°±å®Œæˆäº†ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ·ºè«‡ ECMAScript 5 åš´æ ¼æ¨¡å¼ (Strict Mode) ]]></title>
      <url>http://kuro.tw/posts/2011/11/28/ecmascript-5-strict-mode/</url>
      <content type="html"><![CDATA[<p>è‡ª ECMAScript 5 é–‹å§‹ï¼Œå¢åŠ äº†ä¸€å€‹ åš´æ ¼æ¨¡å¼ (Strict Mode) çš„æ–°ç‰¹æ€§ã€‚</p>
<p>ECMAScript 5 é›–ç„¶å¯ä»¥è·Ÿå‰ä¸€ç‰ˆçš„ ECMAScript 3 ç›¸å®¹ (ECMAScript 4 å·²å»¢æ£„)ï¼Œä½†æ˜¯ï¼Œç•¶æˆ‘å€‘å®£å‘Šç‚º &quot;Strict Mode&quot; å¾Œï¼Œé‚£äº› ECMAScript 5 ä¸å†å»ºè­°ä½¿ç”¨çš„ ECMAScript 3 çš„èˆŠèªæ³•æœƒè¢«å…¨é¢ç¦æ­¢ã€‚
ä¸€æ—¦å‡ºç¾ï¼Œä¾¿æœƒå‡ºç¾éŒ¯èª¤æˆ–æ‹‹å‡ºç•°å¸¸ (Exception)ã€‚</p>
<p>Strict Mode çš„å®£å‘Šæ–¹å¼æœ‰å…©ç¨®ï¼š</p>
<p>è‹¥è¦åœ¨å…¨åŸŸç¯„åœå…§å®£å‘Šä½¿ç”¨ Strict Modeï¼Œåªéœ€åœ¨ç¨‹å¼ç¢¼çš„ç¬¬ä¸€è¡ŒåŠ ä¸Šä¸‹é¢æ•˜è¿°ï¼Œå¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥åœ¨æŒ‡å®šçš„å‡½æ•¸å…§å®£å‘Šä½¿ç”¨ Strict Modeï¼Œåœ¨å‡½æ•¸çš„ç¬¬ä¸€è¡ŒåŠ ä¸Šä¸‹é¢æ•˜è¿°ï¼Œå¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Non-strict code...</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func_UseStrictMode</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">  "use strict"</span>;</div><div class="line">   <span class="comment">// ... your code ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› ç‚ºå®£å‘Šä½¿ç”¨ Strict Mode æ™‚åªéœ€è¦åŠ å…¥ä¸€æ®µ &quot;use strict&quot;; æ•˜è¿°å¼ï¼Œæ‰€ä»¥ä¸æœƒå°äº›èˆŠæ™‚çš„ç€è¦½å™¨é€ æˆä»»ä½•ç›¸å®¹æ€§çš„å•é¡Œã€‚ å†ä¾†ç°¡å–®ä»‹ç´¹ä¸€ä¸‹ Strict Mode èˆ‡é Strict Mode çš„å·®ç•°ï¼š</p>
<p><strong>è®Šæ•¸ï¼š</strong>
JavaScript ä½¿ç”¨è®Šæ•¸çš„æ™‚å€™ä¸ä¸€å®šè¦å…ˆå®£å‘Š (è‹¥ç›´æ¥ä½¿ç”¨æœªå®£å‘Šçš„è®Šæ•¸æœƒè‡ªå‹•è®Šæˆå…¨åŸŸè®Šæ•¸ï¼Œå¼·çƒˆä¸å»ºè­°!) ï¼Œä½†åœ¨ Strict Mode ä¸‹ï¼Œè®Šæ•¸ä½¿ç”¨å‰å¿…é ˆè¦å…ˆç”¨ var å®£å‘Šå¾Œæ‰èƒ½æ‹¿ä¾†ç”¨ï¼Œå¦å‰‡æœƒå‡ºç¾éŒ¯èª¤ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  i = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (err) &#123;</div><div class="line">  alert(err);    <span class="comment">// throw exception !</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œåœ¨ Strict Mode ä¸‹åˆªé™¤å…¨åŸŸè®Šæ•¸ã€å‡½æ•¸ï¼Œæˆ–æ˜¯å‡½æ•¸å…§çš„åƒæ•¸éƒ½æœƒè¢«èªç‚ºæ˜¯éŒ¯èª¤çš„èªæ³•ã€‚
å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> i = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> myfunc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;;</div><div class="line"><span class="keyword">delete</span> i;         <span class="comment">// Error !</span></div><div class="line"><span class="keyword">delete</span> myfunc;    <span class="comment">// Error !</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myfunc2</span>(<span class="params">arg</span>) </span>&#123;</div><div class="line">    <span class="keyword">delete</span> arg;    <span class="comment">// Error !</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å±¬æ€§</strong>ï¼š
åœ¨å®šç¾©ç‰©ä»¶çš„å±¬æ€§æ™‚ï¼Œå±¬æ€§åç¨±ä¸å¯é‡è¤‡ï¼ŒåŒä¸€å€‹ç‰©ä»¶å…§ä¸èƒ½é‡è¤‡å®šç¾©ç›¸åŒå±¬æ€§ï¼Œå¦å‰‡æœƒå‡ºç¾ç•°å¸¸ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line">&#123;</div><div class="line">  <span class="attr">foo</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">foo</span>: <span class="literal">false</span>;     <span class="comment">// Error</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å‡½æ•¸èˆ‡åƒæ•¸</strong>ï¼š
åœ¨ Strict Mode ä¸‹ï¼Œå‡½æ•¸çš„åƒæ•¸ (arguments) ä¸èƒ½æœ‰ç›¸åŒåç¨±çš„è®Šæ•¸ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func1</span>(<span class="params">arg1, arg2</span>) </span>&#123; &#125;    <span class="comment">// OK</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func2</span>(<span class="params">arg, arg</span>) </span>&#123; &#125;      <span class="comment">// Error</span></div></pre></td></tr></table></figure>
<p>åŒæ™‚ï¼Œå‡½æ•¸çš„ arguments å±¬æ€§åœ¨ Strict Mode ä¸‹ä¹Ÿæ˜¯å”¯è®€çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg</span>) </span>&#123;</div><div class="line">  <span class="built_in">arguments</span> = [<span class="string">"..."</span>];    <span class="comment">// not allow, Error.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå° arguments.caller å’Œ arguments.callee çš„å­˜å–æœƒå‡ºç¾éŒ¯èª¤ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">true<span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  	<span class="comment">// Don't exist, either</span></div><div class="line">    test.arguments = ...;		<span class="comment">// Error</span></div><div class="line">    inner.caller = ...;			<span class="comment">// Error</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œä»»ä½•éœ€è¦ç”¨åˆ°çš„åŒ¿åå‡½æ•¸éƒ½å¿…é ˆå…ˆå‘½åï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">later</span>(<span class="params"></span>)</span>&#123;</div><div class="line">true<span class="comment">// do stuff...</span></div><div class="line">truesetTimeout( later, <span class="number">1000</span> );</div><div class="line">&#125;, <span class="number">1000</span> );</div></pre></td></tr></table></figure>
<p>æœ€å¾Œï¼Œç•¶ä½¿ç”¨ null æˆ–è€… undefined ä½œç‚º Function.prototype.call æˆ– Function.prototype.apply æ–¹æ³•çš„ç¬¬ä¸€å€‹åƒæ•¸æ™‚ï¼Œå‡½æ•¸å…§éƒ¨çš„ this å°‡æœƒæŒ‡å‘ global objectã€‚</p>
<p>è€Œ Strict mode å°‡æœƒé˜»æ­¢å…¶åŸ·è¡Œä¸¦æ‹‹å‡ºç•°å¸¸ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; ... &#125;).call( <span class="literal">null</span> );		<span class="comment">// Exception</span></div></pre></td></tr></table></figure>
<p><strong>eval</strong>ï¼š
eval æ˜¯ä¿ç•™çš„é—œéµå­—ï¼Œä¸èƒ½ä½œç‚ºè®Šæ•¸åã€å‡½æ•¸åã€ç‰©ä»¶çš„å±¬æ€§ï¼Œç”šè‡³æ˜¯è®Šæ•¸éƒ½ä¸è¡Œã€‚
æ‰€ä»¥ï¼Œä»¥ä¸‹çš„ç¨‹å¼ç¢¼<strong>å…¨éƒ½æ˜¯éŒ¯èª¤</strong>çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// All generate errors...</span></div><div class="line">obj.eval = ...</div><div class="line">obj.foo = <span class="built_in">eval</span>;</div><div class="line"><span class="keyword">var</span> <span class="built_in">eval</span> = ...;</div><div class="line"></div><div class="line"><span class="keyword">for</span> ( <span class="keyword">var</span> <span class="built_in">eval</span> <span class="keyword">in</span> ... ) &#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">eval</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">eval</span>)</span>&#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">eval</span>)</span>&#123;&#125;</div><div class="line"><span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"eval"</span>)</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œåœ¨ Strict mode é€é eval å¼•å…¥çš„è®Šæ•¸ä¹Ÿæœƒç„¡æ•ˆï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">eval</span>(<span class="string">"var a = false;"</span>);</div><div class="line">print( <span class="keyword">typeof</span> a );			<span class="comment">// undefined.</span></div></pre></td></tr></table></figure>
<p><strong>with() { }</strong>ï¼š
åœ¨ Strict mode ä¸‹æ²’æœ‰é€™å€‹æ±è¥¿äº†ï¼Œå¦‚æœä½¿ç”¨çš„è©±æœƒè¢«èªç‚ºèªæ³•éŒ¯èª¤ã€‚</p>
<p><strong>å…¶ä»–</strong>ï¼š
åœ¨ Strict mode ä¸‹ï¼Œä¸å†æ”¯æ´ 8 é€²ä½æ•¸å­—ã€‚
å¯¦éš›åœ¨ Firefox 8 æ¸¬è©¦çš„çµæœï¼Œæœƒå‡ºç¾ &quot;octal literals and octal escape sequences are deprecated&quot; çš„éŒ¯èª¤ï¼šåœ¨é Strict mode ä¸‹ï¼Œ010 å‰‡æ˜¯æœƒ alert å‡º 8 é€™å€‹æ•¸å­—ã€‚</p>
]]></content>
    </entry>
    
  
  
</search>
